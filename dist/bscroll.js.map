{"version":3,"file":"bscroll.js","sources":["../src/util/debug.ts","../src/base/EventEmitter.ts","../src/util/const.ts","../src/util/env.ts","../src/util/lang.ts","../src/util/dom.ts","../src/util/ease.ts","../src/util/momentum.ts","../src/util/raf.ts","../src/Options.ts","../src/base/ActionsHandler.ts","../src/translater/Base.ts","../src/translater/Position.ts","../src/translater/Transform.ts","../src/animater/Base.ts","../src/animater/Transition.ts","../src/animater/Animation.ts","../src/scroller/Scroller.ts","../src/index.ts"],"sourcesContent":["export function warn(msg: string) {\n  console.error(`[BScroll warn]: ${msg}`)\n}\n\nexport function assert(condition: string | boolean, msg: string) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg)\n  }\n}\n","import { warn } from '../util/debug'\n\ninterface EventsMap {\n  [name: string]: [Function, Object][]\n}\n\ninterface TypesMap {\n  [type: string]: string\n}\n\nexport default class EventEmitter {\n  _events: EventsMap\n  eventTypes: TypesMap\n\n  constructor(names: string[]) {\n    this._events = {}\n    this.eventTypes = {}\n    names.forEach((type: string) => {\n      this.eventTypes[type] = type\n    })\n  }\n\n  on(type: string, fn: Function, context = this) {\n    this._checkInTypes(type)\n    if (!this._events[type]) {\n      this._events[type] = []\n    }\n\n    this._events[type].push([fn, context])\n    return this\n  }\n\n  once(type: string, fn: Function, context = this) {\n    this._checkInTypes(type)\n    const magic = (...args: any[]) => {\n      this.off(type, magic)\n\n      fn.apply(context, args)\n    }\n    magic.fn = fn\n\n    this.on(type, magic)\n    return this\n  }\n\n  off(type: string, fn: Function) {\n    this._checkInTypes(type)\n    let _events = this._events[type]\n    if (!_events) {\n      return this\n    }\n\n    let count = _events.length\n    while (count--) {\n      if (\n        _events[count][0] === fn ||\n        (_events[count][0] && (_events[count][0] as any).fn === fn)\n      ) {\n        _events.splice(count, 1)\n      }\n    }\n\n    return this\n  }\n\n  trigger(type: string, ...args: any[]) {\n    this._checkInTypes(type)\n    let events = this._events[type]\n    if (!events) {\n      return\n    }\n\n    let len = events.length\n    let eventsCopy = [...events]\n    let ret\n    for (let i = 0; i < len; i++) {\n      let event = eventsCopy[i]\n      let [fn, context] = event\n      if (fn) {\n        let ret = fn.apply(context, args)\n        if (ret === true) break\n      }\n    }\n\n    return ret\n  }\n\n  private _checkInTypes(type: string) {\n    const types = this.eventTypes\n    const inTypes = types[type] === type\n    if (!inTypes) {\n      warn(\n        `EventEmitter has used unknown event type: \"${type}\", should be oneof ${types}`\n      )\n    }\n  }\n}\n","export enum Probe {\n  Default,\n  Throttle,\n  Normal,\n  Realtime\n}\n\nexport enum Direction {\n  Up = 1,\n  Left = 1,\n  Down = -1,\n  Right = -1,\n  Default = 0\n}\n\nexport enum EventType {\n  Touch = 1,\n  Mouse = 2\n}\n\nexport enum DirectionLock {\n  Default,\n  Horizontal,\n  Vertical,\n  None\n}\n\nexport enum MouseButton {\n  Left,\n  Middle,\n  Right\n}\n\nexport enum EventPassthrough {\n  None = '',\n  Horizontal = 'horizontal',\n  Vertical = 'vertical'\n}\n","// ssr support\nexport const inBrowser = typeof window !== 'undefined'\nexport const ua = inBrowser && navigator.userAgent.toLowerCase()\nexport const isWeChatDevTools = ua && /wechatdevtools/.test(ua)\nexport const isAndroid = ua && ua.indexOf('android') > 0\n","export function getNow() {\n  return window.performance && window.performance.now\n    ? window.performance.now() + window.performance.timing.navigationStart\n    : +new Date()\n}\n\nexport function extend(\n  target: { [key: string]: any },\n  ...rest: { [key: string]: any }[]\n): object {\n  for (let i = 0; i < rest.length; i++) {\n    let source = rest[i]\n    for (let key in source) {\n      target[key] = source[key] as any\n    }\n  }\n  return target\n}\n\nexport function isUndef(v: any): boolean {\n  return v === undefined || v === null\n}\n\nexport function getDistance(x: number, y: number) {\n  return Math.sqrt(x * x + y * y)\n}\n","import { inBrowser, isWeChatDevTools } from './env'\nimport { extend } from './lang'\nimport { EventType } from './const'\n\nlet elementStyle = (inBrowser && document.createElement('div').style) as any\n\nlet vendor = (() => {\n  if (!inBrowser) {\n    return false\n  }\n  let transformNames: {\n    [prefix: string]: string\n  } = {\n    webkit: 'webkitTransform',\n    Moz: 'MozTransform',\n    O: 'OTransform',\n    ms: 'msTransform',\n    standard: 'transform'\n  }\n\n  for (let key in transformNames) {\n    if (elementStyle[transformNames[key]] !== undefined) {\n      return key\n    }\n  }\n\n  return false\n})()\n\nfunction prefixStyle(style: string) {\n  if (vendor === false) {\n    return false\n  }\n\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend'\n    }\n    return style\n  }\n\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1)\n}\n\nexport function addEvent(\n  el: HTMLElement,\n  type: string,\n  fn: EventListenerOrEventListenerObject,\n  capture?: AddEventListenerOptions\n) {\n  el.addEventListener(type, fn, {\n    passive: false,\n    capture: !!capture\n  })\n}\n\nexport function removeEvent(\n  el: HTMLElement,\n  type: string,\n  fn: EventListenerOrEventListenerObject,\n  capture?: EventListenerOptions\n) {\n  el.removeEventListener(type, fn, {\n    capture: !!capture\n  })\n}\n\nexport function offset(el: HTMLElement | null) {\n  let left = 0\n  let top = 0\n\n  while (el) {\n    left -= el.offsetLeft\n    top -= el.offsetTop\n    el = el.offsetParent as HTMLElement\n  }\n\n  return {\n    left,\n    top\n  }\n}\n\nexport function offsetToBody(el: HTMLElement) {\n  let rect = el.getBoundingClientRect()\n\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  }\n}\n\nexport const cssVendor =\n  vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : ''\n\nlet transform = prefixStyle('transform')\nlet transition = prefixStyle('transition')\n\nexport const hasPerspective =\n  inBrowser && prefixStyle('perspective') in elementStyle\n// fix issue #361\nexport const hasTouch =\n  inBrowser && ('ontouchstart' in window || isWeChatDevTools)\nexport const hasTransform = transform !== false\nexport const hasTransition = inBrowser && transition in elementStyle\n\nexport const style = {\n  transform,\n  transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd')\n}\n\nexport const eventTypeMap: {\n  [key: string]: number\n  touchstart: number\n  touchmove: number\n  touchend: number\n  mousedown: number\n  mousemove: number\n  mouseup: number\n} = {\n  touchstart: EventType.Touch,\n  touchmove: EventType.Touch,\n  touchend: EventType.Touch,\n\n  mousedown: EventType.Mouse,\n  mousemove: EventType.Mouse,\n  mouseup: EventType.Mouse\n}\n\nexport function getRect(el: HTMLElement) {\n  if (el instanceof (window as any).SVGElement) {\n    let rect = el.getBoundingClientRect()\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    }\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    }\n  }\n}\n\nexport function preventDefaultExceptionFn(\n  el: any,\n  exceptions: {\n    tagName?: RegExp\n    className?: RegExp\n    [key: string]: any\n  }\n) {\n  for (let i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function tap(e: any, eventName: string) {\n  let ev = document.createEvent('Event') as any\n  ev.initEvent(eventName, true, true)\n  ev.pageX = e.pageX\n  ev.pageY = e.pageY\n  e.target.dispatchEvent(ev)\n}\n\nexport function click(e: any, event = 'click') {\n  let eventSource\n  if (e.type === 'mouseup' || e.type === 'mousecancel') {\n    eventSource = e\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0]\n  }\n  let posSrc: {\n    screenX?: number\n    screenY?: number\n    clientX?: number\n    clientY?: number\n  } = {}\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0\n    posSrc.screenY = eventSource.screenY || 0\n    posSrc.clientX = eventSource.clientX || 0\n    posSrc.clientY = eventSource.clientY || 0\n  }\n  let ev: any\n  const bubbles = true\n  const cancelable = true\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(\n        event,\n        extend(\n          {\n            bubbles,\n            cancelable\n          },\n          posSrc\n        )\n      )\n    } catch (e) {\n      createEvent()\n    }\n  } else {\n    createEvent()\n  }\n\n  function createEvent() {\n    ev = document.createEvent('Event')\n    ev.initEvent(event, bubbles, cancelable)\n    extend(ev, posSrc)\n  }\n\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true\n  ev._constructed = true\n  e.target.dispatchEvent(ev)\n}\n\nexport function dblclick(e: Event) {\n  click(e, 'dblclick')\n}\n\nexport function prepend(el: HTMLElement, target: HTMLElement) {\n  const firstChild = target.firstChild as HTMLElement\n  if (firstChild) {\n    before(el, firstChild)\n  } else {\n    target.appendChild(el)\n  }\n}\n\nexport function before(el: HTMLElement, target: HTMLElement) {\n  ;(target.parentNode as HTMLElement).insertBefore(el, target)\n}\n\nexport function removeChild(el: HTMLElement, child: HTMLElement) {\n  el.removeChild(child)\n}\n","interface EaseMap {\n  [key: string]: {\n    style: string\n    fn: EaseFn\n  }\n}\n\nexport interface EaseFn {\n  (t: number): number\n}\n\nexport const ease: EaseMap = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function(t: number) {\n      return 1 + --t * t * t * t * t\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function(t: number) {\n      return t * (2 - t)\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function(t: number) {\n      return 1 - --t * t * t * t\n    }\n  }\n}\n","export function momentum(\n  current: number,\n  start: number,\n  time: number,\n  lowerMargin: number,\n  upperMargin: number,\n  wrapperSize: number,\n  options: any\n) {\n  let distance = current - start\n  let speed = Math.abs(distance) / time\n\n  let { deceleration, itemHeight, swipeBounceTime, wheel, swipeTime } = options\n  let duration = swipeTime\n  let rate = wheel ? 4 : 15\n\n  let destination = current + (speed / deceleration) * (distance < 0 ? -1 : 1)\n\n  if (wheel && itemHeight) {\n    destination = Math.round(destination / itemHeight) * itemHeight\n  }\n\n  if (destination < lowerMargin) {\n    destination = wrapperSize\n      ? Math.max(\n          lowerMargin - wrapperSize / 4,\n          lowerMargin - (wrapperSize / rate) * speed\n        )\n      : lowerMargin\n    duration = swipeBounceTime\n  } else if (destination > upperMargin) {\n    destination = wrapperSize\n      ? Math.min(\n          upperMargin + wrapperSize / 4,\n          upperMargin + (wrapperSize / rate) * speed\n        )\n      : upperMargin\n    duration = swipeBounceTime\n  }\n\n  return {\n    destination: Math.round(destination),\n    duration\n  }\n}\n","import { inBrowser } from './env'\n\ninterface DelayedHandler {\n  (): void\n  interval: number\n}\n\nconst DEFAULT_INTERVAL = 100 / 60\nconst windowCompat = window as any\nfunction noop() {}\n\nexport const requestAnimationFrame = (() => {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop\n  }\n  return (\n    windowCompat.requestAnimationFrame ||\n    windowCompat.webkitRequestAnimationFrame ||\n    windowCompat.mozRequestAnimationFrame ||\n    windowCompat.oRequestAnimationFrame ||\n    // if all else fails, use setTimeout\n    function(callback: DelayedHandler) {\n      return window.setTimeout(\n        callback,\n        (callback.interval || DEFAULT_INTERVAL) / 2\n      ) // make interval as precise as possible.\n    }\n  )\n})()\n\nexport const cancelAnimationFrame = (() => {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop\n  }\n  return (\n    windowCompat.cancelAnimationFrame ||\n    windowCompat.webkitCancelAnimationFrame ||\n    windowCompat.mozCancelAnimationFrame ||\n    windowCompat.oCancelAnimationFrame ||\n    function(id: number) {\n      window.clearTimeout(id)\n    }\n  )\n})()\n","import {\n  hasTransition,\n  hasTransform,\n  hasPerspective,\n  hasTouch,\n  Probe,\n  EventPassthrough\n} from './util'\n\n// type\nexport type tap = 'tap' | ''\nexport type bounceOptions = Partial<bounceConfig> | boolean\nexport type pickerOptions = Partial<pickerConfig> | boolean\nexport type slideOptions = Partial<slideConfig> | boolean\nexport type scrollbarOptions = Partial<scrollbarConfig> | boolean\nexport type pullDownRefreshOptions = Partial<pullDownRefreshConfig> | boolean\nexport type pullUpLoadOptions = Partial<pullUpLoadConfig> | boolean\nexport type mouseWheelOptions = Partial<mouseWheelConfig> | boolean\nexport type zoomOptions = Partial<zoomConfig> | boolean\nexport type infinityOptions = Partial<infinityConfig> | boolean\nexport type dblclickOptions = Partial<dblclickConfig> | boolean\n\n// interface\nexport interface bounceConfig {\n  top: boolean\n  bottom: boolean\n  left: boolean\n  right: boolean\n}\n\ninterface pickerConfig {\n  selectedIndex: number\n  rotate: number\n  adjustTime: number\n  wheelWrapperClass: string\n  wheelItemClass: string\n}\n\ninterface slideConfig {\n  loop: boolean\n  el: HTMLElement\n  threshold: number\n  stepX: number\n  stepY: number\n  speed: number\n  easing: {\n    style: string\n    fn: (t: number) => number\n  }\n  listenFlick: boolean\n}\n\ninterface scrollbarConfig {\n  fade: boolean\n  interactive: boolean\n}\n\ninterface pullDownRefreshConfig {\n  threshold: number\n  stop: number\n}\n\ninterface pullUpLoadConfig {\n  threshold: number\n}\n\ninterface mouseWheelConfig {\n  speed: number\n  invert: boolean\n  easeTime: number\n}\n\ninterface zoomConfig {\n  start: number\n  min: number\n  max: number\n}\n\ninterface infinityConfig {\n  render: (item: object, div: any) => void\n  createTombstone: () => HTMLElement\n  fetch: (count: number) => void\n}\n\ninterface dblclickConfig {\n  delay: number\n}\n\nexport default class Options {\n  [key: string]: any\n  startX: number\n  startY: number\n  scrollX: boolean\n  scrollY: boolean\n  freeScroll: boolean\n  directionLockThreshold: number\n  eventPassthrough: string\n  click: boolean\n  tap: tap\n  bounce: bounceOptions\n  bounceTime: number\n  momentum: boolean\n  momentumLimitTime: number\n  momentumLimitDistance: number\n  swipeTime: number\n  swipeBounceTime: number\n  deceleration: number\n  flickLimitTime: number\n  flickLimitDistance: number\n  resizePolling: number\n  probeType: number\n  stopPropagation: boolean\n  preventDefault: boolean\n  preventDefaultException: {\n    tagName?: RegExp\n    className?: RegExp\n  }\n  HWCompositing: boolean\n  useTransition: boolean\n  useTransform: boolean\n  bindToWrapper: boolean\n  disableMouse: boolean | ''\n  observeDOM: boolean\n  autoBlur: boolean\n  translateZ: string\n  // plugins options\n  picker: pickerOptions\n  slide: slideOptions\n  scrollbar: scrollbarOptions\n  pullDownRefresh: pullDownRefreshOptions\n  pullUpLoad: pullUpLoadOptions\n  mouseWheel: mouseWheelOptions\n  zoom: zoomOptions\n  infinity: infinityOptions\n  dblclick: dblclickOptions\n\n  constructor() {\n    this.startX = 0\n    this.startY = 0\n    this.scrollX = false\n    this.scrollY = true\n    this.freeScroll = false\n    this.directionLockThreshold = 5\n    this.eventPassthrough = EventPassthrough.None\n    this.click = false\n    this.tap = ''\n\n    /**\n     * support any side\n     * bounce: {\n     *   top: true,\n     *   bottom: true,\n     *   left: true,\n     *   right: true\n     * }\n     */\n    this.bounce = true\n    this.bounceTime = 800\n\n    this.momentum = true\n    this.momentumLimitTime = 300\n    this.momentumLimitDistance = 15\n\n    this.swipeTime = 2500\n    this.swipeBounceTime = 500\n\n    this.deceleration = 0.0015\n\n    this.flickLimitTime = 200\n    this.flickLimitDistance = 100\n\n    this.resizePolling = 60\n    this.probeType = Probe.Default\n\n    this.stopPropagation = false\n    this.preventDefault = true\n    this.preventDefaultException = {\n      tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\n    }\n\n    this.HWCompositing = true\n\n    this.useTransition = true\n    this.useTransform = true\n    this.bindToWrapper = false\n    this.disableMouse = hasTouch\n    this.observeDOM = true\n    this.autoBlur = true\n\n    // plugins config\n\n    /**\n     * for picker\n     * wheel: {\n     *   selectedIndex: 0,\n     *   rotate: 25,\n     *   adjustTime: 400\n     *   wheelWrapperClass: 'wheel-scroll',\n     *   wheelItemClass: 'wheel-item'\n     * }\n     */\n    this.picker = false\n\n    /**\n     * for slide\n     * slide: {\n     *   loop: false,\n     *   el: domEl,\n     *   threshold: 0.1,\n     *   stepX: 100,\n     *   stepY: 100,\n     *   speed: 400,\n     *   easing: {\n     *     style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n     *     fn: function (t) {\n     *       return t * (2 - t)\n     *     }\n     *   }\n     *   listenFlick: true\n     * }\n     */\n    this.slide = false\n\n    /**\n     * for scrollbar\n     * scrollbar: {\n     *   fade: true,\n     *   interactive: false\n     * }\n     */\n    this.scrollbar = false\n\n    /**\n     * for pull down and refresh\n     * pullDownRefresh: {\n     *   threshold: 50,\n     *   stop: 20\n     * }\n     */\n    this.pullDownRefresh = false\n\n    /**\n     * for pull up and load\n     * pullUpLoad: {\n     *   threshold: 50\n     * }\n     */\n    this.pullUpLoad = false\n\n    /**\n     * for mouse wheel\n     * mouseWheel: {\n     *   speed: 20,\n     *   invert: false,\n     *   easeTime: 300\n     * }\n     */\n    this.mouseWheel = false\n\n    /**\n     * for zoom\n     * zoom: {\n     *   start: 1,\n     *   min: 1,\n     *   max: 4\n     * }\n     */\n    this.zoom = false\n\n    /**\n     * for infinity\n     * infinity: {\n     *   render(item, div) {\n     *   },\n     *   createTombstone() {\n     *   },\n     *   fetch(count) {\n     *   }\n     * }\n     */\n    this.infinity = false\n\n    /**\n     * for double click\n     * dblclick: {\n     *   delay: 300\n     * }\n     */\n    this.dblclick = false\n  }\n  merge(options?: { [key: string]: any }) {\n    if (!options) return this\n    for (let key in options) {\n      this[key] = options[key]\n    }\n    return this\n  }\n  process() {\n    this.translateZ =\n      this.HWCompositing && hasPerspective ? ' translateZ(0)' : ''\n\n    this.useTransition = this.useTransition && hasTransition\n    this.useTransform = this.useTransform && hasTransform\n\n    this.preventDefault = !this.eventPassthrough && this.preventDefault\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.scrollX = this.eventPassthrough === 'horizontal' ? false : this.scrollX\n    this.scrollY = this.eventPassthrough === 'vertical' ? false : this.scrollY\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.freeScroll = this.freeScroll && !this.eventPassthrough\n    this.directionLockThreshold = this.eventPassthrough\n      ? 0\n      : this.directionLockThreshold\n\n    return this\n  }\n}\n","import EventEmitter from './EventEmitter'\nimport { EventType, TouchEvent, MouseButton } from '../util'\n\nimport {\n  // dom\n  addEvent,\n  removeEvent,\n  preventDefaultExceptionFn,\n  eventTypeMap\n} from '../util'\n\nexport interface Options {\n  [key: string]: any\n  bindToWrapper: boolean\n  click: boolean\n  disableMouse: boolean\n  preventDefault: boolean\n  stopPropagation: boolean\n  preventDefaultException: {\n    tagName?: RegExp\n    className?: RegExp\n  }\n}\n\nexport default class ActionsHandler {\n  hooks: EventEmitter\n  initiated: number | boolean\n  pointX: number\n  pointY: number\n  constructor(public wrapper: HTMLElement, public options: Options) {\n    this.hooks = new EventEmitter(['start', 'move', 'end'])\n    this.addDOMEvents()\n  }\n\n  private addDOMEvents() {\n    const eventOperation = addEvent\n    this.handleDOMEvents(eventOperation)\n  }\n\n  private removeDOMEvents() {\n    const eventOperation = removeEvent\n    this.handleDOMEvents(eventOperation)\n  }\n\n  private handleDOMEvents(eventOperation: Function) {\n    const { bindToWrapper, click, disableMouse } = this.options\n    const wrapper = this.wrapper\n    const target = bindToWrapper ? wrapper : window\n    eventOperation(window, 'orientationchange', this)\n    eventOperation(window, 'resize', this)\n\n    if (click) {\n      eventOperation(wrapper, 'click', this, true)\n    }\n\n    if (!disableMouse) {\n      eventOperation(wrapper, 'mousedown', this)\n      eventOperation(target, 'mousemove', this)\n      eventOperation(target, 'mousecancel', this)\n      eventOperation(target, 'mouseup', this)\n    }\n\n    if (disableMouse) {\n      eventOperation(wrapper, 'touchstart', this)\n      eventOperation(target, 'touchmove', this)\n      eventOperation(target, 'touchcancel', this)\n      eventOperation(target, 'touchend', this)\n    }\n  }\n  private handleEvent(e: TouchEvent) {\n    switch (e.type) {\n      case 'touchstart':\n      case 'mousedown':\n        this.start(e)\n        break\n      case 'touchmove':\n      case 'mousemove':\n        this.move(e)\n        break\n      case 'touchend':\n      case 'mouseup':\n      case 'touchcancel':\n      case 'mousecancel':\n        this.end(e)\n        break\n    }\n  }\n  private start(e: TouchEvent) {\n    const _eventType = eventTypeMap[e.type]\n\n    if (this.initiated && this.initiated !== _eventType) {\n      return\n    }\n    this.initiated = _eventType\n\n    // no mouse left button\n    if (_eventType === EventType.Mouse && e.button !== MouseButton.Left) return\n\n    const {\n      preventDefault,\n      stopPropagation,\n      preventDefaultException\n    } = this.options\n    if (\n      preventDefault &&\n      !preventDefaultExceptionFn(e.target, preventDefaultException)\n    ) {\n      e.preventDefault()\n    }\n    if (stopPropagation) {\n      e.stopPropagation()\n    }\n\n    let point = (e.touches ? e.touches[0] : e) as Touch\n    this.pointX = point.pageX\n    this.pointY = point.pageY\n\n    this.hooks.trigger(this.hooks.eventTypes.start, {\n      timeStamp: e.timeStamp\n    })\n  }\n\n  private move(e: TouchEvent) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return\n    }\n\n    const {\n      preventDefault,\n      stopPropagation,\n      preventDefaultException\n    } = this.options\n    if (\n      preventDefault &&\n      !preventDefaultExceptionFn(e.target, preventDefaultException)\n    ) {\n      e.preventDefault()\n    }\n    if (stopPropagation) {\n      e.stopPropagation()\n    }\n\n    let point = (e.touches ? e.touches[0] : e) as Touch\n    let deltaX = point.pageX - this.pointX\n    let deltaY = point.pageY - this.pointY\n\n    this.pointX = point.pageX\n    this.pointY = point.pageY\n\n    if (\n      this.hooks.trigger(this.hooks.eventTypes.move, {\n        timeStamp: e.timeStamp,\n        deltaX,\n        deltaY,\n        e,\n        actionsHandler: this\n      })\n    )\n      return\n\n    // auto end when out of wrapper\n    let scrollLeft =\n      document.documentElement.scrollLeft ||\n      window.pageXOffset ||\n      document.body.scrollLeft\n    let scrollTop =\n      document.documentElement.scrollTop ||\n      window.pageYOffset ||\n      document.body.scrollTop\n\n    let pX = this.pointX - scrollLeft\n    let pY = this.pointY - scrollTop\n\n    if (\n      pX >\n        document.documentElement.clientWidth -\n          this.options.momentumLimitDistance ||\n      pX < this.options.momentumLimitDistance ||\n      pY < this.options.momentumLimitDistance ||\n      pY >\n        document.documentElement.clientHeight -\n          this.options.momentumLimitDistance\n    ) {\n      this.end(e)\n    }\n  }\n  end(e: TouchEvent) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return\n    }\n    this.initiated = false\n\n    const {\n      preventDefault,\n      stopPropagation,\n      preventDefaultException\n    } = this.options\n    if (\n      preventDefault &&\n      !preventDefaultExceptionFn(e.target, preventDefaultException)\n    ) {\n      e.preventDefault()\n    }\n    if (stopPropagation) {\n      e.stopPropagation()\n    }\n\n    this.hooks.trigger(this.hooks.eventTypes.end, e)\n  }\n\n  private setPointPosition(e: TouchEvent) {\n    let point = (e.touches ? e.touches[0] : e) as Touch\n    this.pointX = point.pageX\n    this.pointY = point.pageY\n\n    return point\n  }\n}\n","import { isUndef } from '../util'\n\nexport default class Base {\n  element: HTMLElement\n  style: CSSStyleDeclaration\n  x: number\n  y: number\n  scale: number\n  lastScale: number\n  constructor(element: HTMLElement) {\n    this.element = element\n    // cache for better performance\n    this.style = element.style\n\n    this.setUpProps()\n  }\n\n  setScale(scale: number) {\n    this.lastScale = isUndef(this.scale) ? scale : this.scale\n    this.scale = scale\n  }\n\n  private setUpProps() {\n    this.x = 0\n    this.y = 0\n    this.setScale(1)\n  }\n\n  updateProps(x: number, y: number, scale: number) {\n    this.x = x\n    this.y = y\n\n    this.setScale(scale)\n  }\n}\n","import Base from './Base'\nexport default class Position extends Base {\n  constructor(element: HTMLElement) {\n    super(element)\n  }\n\n  getComputedPosition() {\n    let cssStyle = window.getComputedStyle(this.element, null) as any\n    let x = +cssStyle.left.replace(/[^-\\d.]/g, '')\n    let y = +cssStyle.top.replace(/[^-\\d.]/g, '')\n\n    return {\n      x,\n      y\n    }\n  }\n\n  updatePosition(x: number, y: number, scale: number) {\n    this.style.left = `${Math.round(x)}px`\n    this.style.top = `${Math.round(y)}px`\n\n    this.updateProps(x, y, scale)\n  }\n}\n","import { style } from '../util'\nimport Base from './Base'\n\ninterface Options {\n  translateZ: string\n}\nexport default class Transform extends Base {\n  options: Options\n  constructor(element: HTMLElement, options: Options) {\n    super(element)\n    this.options = options\n  }\n  getComputedPosition() {\n    let cssStyle = window.getComputedStyle(this.element, null) as any\n    let matrix = cssStyle[style.transform as string].split(')')[0].split(', ')\n    const x = +(matrix[12] || matrix[4])\n    const y = +(matrix[13] || matrix[5])\n\n    return {\n      x,\n      y\n    }\n  }\n\n  updatePosition(x: number, y: number, scale: number) {\n    this.style[\n      style.transform as any\n    ] = `translate(${x}px,${y}px) scale(${scale})${this.options.translateZ}`\n\n    this.updateProps(x, y, scale)\n  }\n}\n","import EventEmitter from '../base/EventEmitter'\nimport { Position, Transform } from '../translater'\nimport { EaseFn, isUndef } from '../util'\n\nexport default class Base {\n  style: CSSStyleDeclaration\n  hooks: EventEmitter\n  timer: number\n  pending: boolean\n  minScrollX: number\n  maxScrollX: number\n  minScrollY: number\n  maxScrollY: number\n  hasHorizontalScroll: boolean\n  hasVerticalScroll: boolean\n  forceStopped?: boolean\n  _reflow?: number\n  [key: string]: any\n\n  constructor(\n    public element: HTMLElement,\n    public translater: Position | Transform,\n    public options: {\n      bounceTime: number\n      probeType: number\n    }\n  ) {\n    this.hooks = new EventEmitter(['scroll', 'scrollEnd'])\n    this.style = element.style\n  }\n\n  refresh(boundaryInfo: {\n    minScrollX: number\n    maxScrollX: number\n    minScrollY: number\n    maxScrollY: number\n    hasHorizontalScroll: boolean\n    hasVerticalScroll: boolean\n    [key: string]: number | boolean\n  }) {\n    Object.keys(boundaryInfo).forEach(key => {\n      this[key] = boundaryInfo[key]\n    })\n  }\n\n  translate(x: number, y: number, scale: number) {\n    this.translater.updatePosition(x, y, scale)\n  }\n\n  _resetPosition(time: number, easing: string | EaseFn) {\n    let x = this.translater.x\n    let roundX = Math.round(x)\n    if (!this.hasHorizontalScroll || roundX > this.minScrollX) {\n      x = this.minScrollX\n    } else if (roundX < this.maxScrollX) {\n      x = this.maxScrollX\n    }\n\n    let y = this.translater.y\n    let roundY = Math.round(y)\n    if (!this.hasVerticalScroll || roundY > this.minScrollY) {\n      y = this.minScrollY\n    } else if (roundY < this.maxScrollY) {\n      y = this.maxScrollY\n    }\n\n    // in boundary\n    if (x === this.translater.x && y === this.translater.y) {\n      return false\n    }\n\n    // out of boundary\n    this.scrollTo(x, y, time, easing)\n    return true\n  }\n\n  scrollTo(x: number, y: number, time: number, easing: string | EaseFn) {\n    throw new Error('Abstract: should be overriden')\n  }\n\n  protected callHooks(\n    eventType: string,\n    pos?: {\n      x: number\n      y: number\n    }\n  ) {\n    pos = isUndef(pos)\n      ? {\n          x: this.translater.x,\n          y: this.translater.y\n        }\n      : pos\n\n    this.hooks.trigger(eventType, pos)\n  }\n}\n","import {\n  style,\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  Probe,\n  ease,\n  EaseFn\n} from '../util'\nimport Base from './Base'\nimport { Position, Transform } from '../translater'\n\nexport default class Transition extends Base {\n  constructor(\n    element: HTMLElement,\n    translater: Position | Transform,\n    options: {\n      probeType: number\n      bounceTime: number\n    }\n  ) {\n    super(element, translater, options)\n  }\n\n  startProbe() {\n    const probe = () => {\n      let pos = this.translater.getComputedPosition()\n      this.callHooks(this.hooks.eventTypes.scroll, pos)\n      // excuted when transition ends\n      if (!this.pending) {\n        this.callHooks(this.hooks.eventTypes.scrollEnd, pos)\n        return\n      }\n      this.timer = requestAnimationFrame(probe)\n    }\n    cancelAnimationFrame(this.timer)\n    this.timer = requestAnimationFrame(probe)\n  }\n\n  transitionTime(time = 0) {\n    this.style[style.transitionDuration as any] = time + 'ms'\n  }\n\n  transitionTimingFunction(easing: string) {\n    this.style[style.transitionTimingFunction as any] = easing\n  }\n\n  scrollTo(x: number, y: number, time: number, easingFn: string | EaseFn) {\n    this.pending = time > 0\n    this.transitionTimingFunction(easingFn as string)\n    this.transitionTime(time)\n    this.translater.updatePosition(x, y, this.translater.scale)\n\n    // TODO when probeType is not Realtime, need to dispatch scroll ?\n    if (time && this.options.probeType === Probe.Realtime) {\n      this.startProbe()\n    }\n\n    // when time is 0\n    if (!time) {\n      this.callHooks(this.hooks.eventTypes.scroll, {\n        x,\n        y\n      })\n      // force reflow to put everything in position\n      this._reflow = document.body.offsetHeight\n      if (!this.resetPosition(this.options.bounceTime)) {\n        this.callHooks(this.hooks.eventTypes.scrollEnd)\n      }\n    }\n  }\n\n  stop() {\n    // still in transition\n    if (this.pending) {\n      this.pending = false\n      cancelAnimationFrame(this.timer)\n      let pos = this.translater.getComputedPosition()\n      this.transitionTime()\n      this.translate(pos.x, pos.y, this.translater.scale)\n      this.callHooks(this.hooks.eventTypes.scrollEnd, {\n        x: pos.x,\n        y: pos.y\n      })\n      this.forceStopped = true\n    }\n  }\n\n  resetPosition(time = 0, easing = ease.bounce) {\n    const easingStyle = easing.style\n    return this._resetPosition(time, easingStyle)\n  }\n}\n","import { Position, Transform } from '../translater'\nimport Base from './Base'\nimport {\n  getNow,\n  Probe,\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  ease,\n  EaseFn\n} from '../util'\n\nexport default class Animation extends Base {\n  constructor(\n    element: HTMLElement,\n    translater: Position | Transform,\n    options: {\n      bounceTime: number\n      probeType: number\n    }\n  ) {\n    super(element, translater, options)\n  }\n\n  scrollTo(x: number, y: number, time: number, easingFn: EaseFn | string) {\n    // time is 0\n    if (!time) {\n      this.translater.updatePosition(x, y, this.translater.scale)\n\n      this.hooks.trigger(this.hooks.eventTypes.scroll, {\n        x,\n        y\n      })\n      // force reflow to put everything in position\n      this._reflow = document.body.offsetHeight\n      if (!this.resetPosition(this.options.bounceTime)) {\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, {\n          x: this.translater.x,\n          y: this.translater.y\n        })\n      }\n      return\n    }\n    this.animate(x, y, time, easingFn as EaseFn)\n  }\n\n  private animate(\n    destX: number,\n    destY: number,\n    duration: number,\n    easingFn: EaseFn\n  ) {\n    let startX = this.translater.x\n    let startY = this.translater.y\n    let startScale = this.translater.lastScale\n    let destScale = this.translater.scale\n    let startTime = getNow()\n    let destTime = startTime + duration\n\n    const step = () => {\n      let now = getNow()\n\n      if (now >= destTime) {\n        this.pending = false\n        this.translate(destX, destY, destScale)\n\n        this.callHooks(this.hooks.eventTypes.scroll)\n\n        if (!this.resetPosition(this.options.bounceTime)) {\n          this.callHooks(this.hooks.eventTypes.scrollEnd)\n        }\n        return\n      }\n      now = (now - startTime) / duration\n      let easing = easingFn(now)\n      let newX = (destX - startX) * easing + startX\n      let newY = (destY - startY) * easing + startY\n      let newScale = (destScale - startScale) * easing + startScale\n\n      this.translate(newX, newY, newScale)\n\n      if (this.pending) {\n        this.timer = requestAnimationFrame(step)\n      }\n\n      if (this.options.probeType === Probe.Realtime) {\n        this.callHooks(this.hooks.eventTypes.scroll)\n      }\n    }\n\n    this.pending = true\n    cancelAnimationFrame(this.timer)\n    step()\n  }\n\n  stop() {\n    // still in requestFrameAnimation\n    const { x, y } = this.translater\n    if (this.pending) {\n      this.pending = false\n      cancelAnimationFrame(this.timer)\n      this.callHooks(this.hooks.eventTypes.scrollEnd, {\n        x,\n        y\n      })\n      this.forceStopped = true\n    }\n  }\n\n  resetPosition(time = 0, easing = ease.bounce) {\n    const easingFn = easing.fn\n    return this._resetPosition(time, easingFn)\n  }\n}\n","import ActionsHandler, {\n  Options as ActionsHandlerOptions\n} from '../base/ActionsHandler'\nimport EventEmitter from '../base/EventEmitter'\nimport { Transform, Position } from '../translater'\nimport { Animation, Transition } from '../animater'\nimport BScrollOptions, { bounceConfig } from '../Options'\n\nimport {\n  addEvent,\n  removeEvent,\n  Direction,\n  DirectionLock,\n  EventPassthrough,\n  Probe,\n  ease,\n  offset,\n  getRect,\n  EaseFn,\n  style,\n  preventDefaultExceptionFn,\n  TouchEvent,\n  isAndroid,\n  momentum,\n  click,\n  tap\n} from '../util'\nimport { truncateSync } from 'fs'\n\nexport default class Scroller {\n  wrapper: HTMLElement\n  element: HTMLElement\n  actionsHandler: ActionsHandler\n  translater: Position | Transform\n  animater: Animation | Transition\n  hooks: EventEmitter\n  options: BScrollOptions\n  enabled: boolean\n  startX: number\n  startY: number\n  absStartX: number\n  absStartY: number\n  pointX: number\n  pointY: number\n  moved: boolean\n  wrapperWidth: number\n  wrapperHeight: number\n  elementWidth: number\n  elementHeight: number\n  relativeX: number\n  relativeY: number\n  minScrollX: number\n  maxScrollX: number\n  minScrollY: number\n  maxScrollY: number\n  hasHorizontalScroll: boolean\n  hasVerticalScroll: boolean\n  directionX: number\n  directionY: number\n  movingDirectionX: number\n  movingDirectionY: number\n  directionLocked: string | number\n  wrapperOffset: {\n    left: number\n    top: number\n  }\n  resizeTimeout: number\n  startTime: number\n  endTime: number\n  constructor(wrapper: HTMLElement, options: BScrollOptions) {\n    this.hooks = new EventEmitter([\n      'scroll',\n      'scrollEnd',\n      'refresh',\n      'beforeScrollStart',\n      'scrollStart',\n      'touchEnd',\n      'flick',\n      'scrollCancel'\n    ])\n    this.wrapper = wrapper\n    this.element = wrapper.children[0] as HTMLElement\n    this.options = options\n\n    this.translater = this.options.useTransform\n      ? new Transform(this.element, {\n          translateZ: this.options.translateZ\n        })\n      : new Position(this.element)\n\n    this.animater = this.options.useTransition\n      ? new Transition(this.element, this.translater, {\n          probeType: this.options.probeType,\n          bounceTime: this.options.bounceTime\n        })\n      : new Animation(this.element, this.translater, {\n          probeType: this.options.probeType,\n          bounceTime: this.options.bounceTime\n        })\n\n    const actionsHandler = new ActionsHandler(\n      wrapper,\n      this.createActionsHandlerOpt()\n    )\n\n    this.enabled = true\n\n    this.addDOMEvents()\n\n    actionsHandler.hooks.on(\n      actionsHandler.hooks.eventTypes.start,\n      ({ timeStamp }: { timeStamp: number }) => {\n        if (!this.enabled) return true\n\n        this.moved = false\n        this.directionX = Direction.Default\n        this.directionY = Direction.Default\n        this.movingDirectionX = Direction.Default\n        this.movingDirectionY = Direction.Default\n        this.directionLocked = DirectionLock.Default\n\n        this.startX = this.translater.x\n        this.startY = this.translater.y\n\n        this.absStartX = this.translater.x\n        this.absStartY = this.translater.y\n\n        this.startTime = timeStamp\n        // force stopping last transition or animation\n        this.animater.stop()\n\n        this.hooks.trigger(this.hooks.eventTypes.beforeScrollStart)\n      }\n    )\n\n    actionsHandler.hooks.on(\n      actionsHandler.hooks.eventTypes.move,\n      ({\n        timeStamp,\n        deltaX,\n        deltaY,\n        actionsHandler,\n        e\n      }: {\n        timeStamp: number\n        deltaX: number\n        deltaY: number\n        actionsHandler: ActionsHandler\n        e: TouchEvent\n      }) => {\n        if (!this.enabled) return true\n\n        const absDistX = Math.abs(deltaX)\n        const absDistY = Math.abs(deltaY)\n\n        // We need to move at least momentumLimitDistance pixels for the scrolling to initiate\n        if (\n          timeStamp - this.endTime > this.options.momentumLimitTime &&\n          (absDistY < this.options.momentumLimitDistance &&\n            absDistX < this.options.momentumLimitDistance)\n        ) {\n          return true\n        }\n\n        // If you are scrolling in one direction lock the other\n        if (!this.directionLocked && !this.options.freeScroll) {\n          if (absDistX > absDistY + this.options.directionLockThreshold) {\n            this.directionLocked = DirectionLock.Horizontal // lock horizontally\n          } else if (\n            absDistY >=\n            absDistX + this.options.directionLockThreshold\n          ) {\n            this.directionLocked = DirectionLock.Vertical // lock vertically\n          } else {\n            this.directionLocked = DirectionLock.None // no lock\n          }\n        }\n\n        if (this.directionLocked === DirectionLock.Horizontal) {\n          if (this.options.eventPassthrough === EventPassthrough.Vertical) {\n            e.preventDefault()\n          } else if (\n            this.options.eventPassthrough === EventPassthrough.Horizontal\n          ) {\n            actionsHandler.initiated = false\n            return true\n          }\n          deltaY = 0\n        } else if (this.directionLocked === DirectionLock.Vertical) {\n          if (this.options.eventPassthrough === EventPassthrough.Horizontal) {\n            e.preventDefault()\n          } else if (\n            this.options.eventPassthrough === EventPassthrough.Vertical\n          ) {\n            actionsHandler.initiated = false\n            return true\n          }\n          deltaX = 0\n        }\n\n        deltaX = this.hasHorizontalScroll ? deltaX : 0\n        deltaY = this.hasVerticalScroll ? deltaY : 0\n\n        this.movingDirectionX =\n          deltaX > 0\n            ? Direction.Right\n            : deltaX < 0\n            ? Direction.Left\n            : Direction.Default\n        this.movingDirectionY =\n          deltaY > 0\n            ? Direction.Down\n            : deltaY < 0\n            ? Direction.Up\n            : Direction.Default\n\n        let newX = this.translater.x + deltaX\n        let newY = this.translater.y + deltaY\n\n        let top = false\n        let bottom = false\n        let left = false\n        let right = false\n\n        // Slow down or stop if outside of the boundaries\n        const bounce = this.options.bounce as Partial<bounceConfig>\n        if (bounce !== false) {\n          top = bounce.top === undefined ? true : bounce.top\n          bottom = bounce.bottom === undefined ? true : bounce.bottom\n          left = bounce.left === undefined ? true : bounce.left\n          right = bounce.right === undefined ? true : bounce.right\n        }\n        if (newX > this.minScrollX || newX < this.maxScrollX) {\n          if (\n            (newX > this.minScrollX && left) ||\n            (newX < this.maxScrollX && right)\n          ) {\n            newX = this.translater.x + deltaX / 3\n          } else {\n            newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX\n          }\n        }\n        if (newY > this.minScrollY || newY < this.maxScrollY) {\n          if (\n            (newY > this.minScrollY && top) ||\n            (newY < this.maxScrollY && bottom)\n          ) {\n            newY = this.translater.y + deltaY / 3\n          } else {\n            newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY\n          }\n        }\n\n        if (!this.moved) {\n          this.moved = true\n          this.hooks.trigger(this.hooks.eventTypes.scrollStart)\n        }\n\n        this.animater.translate(newX, newY, this.translater.scale)\n\n        // dispatch scroll in interval time\n        if (timeStamp - this.startTime > this.options.momentumLimitTime) {\n          // refresh time and start position to initiate a momentum\n          this.startTime = timeStamp\n          this.startX = this.translater.x\n          this.startY = this.translater.y\n\n          if (this.options.probeType === Probe.Throttle) {\n            this.hooks.trigger(this.hooks.eventTypes.scroll, {\n              x: this.translater.x,\n              y: this.translater.y\n            })\n          }\n        }\n\n        // dispatch scroll all the time\n        if (this.options.probeType > Probe.Throttle) {\n          this.hooks.trigger(this.hooks.eventTypes.scroll, {\n            x: this.translater.x,\n            y: this.translater.y\n          })\n        }\n      }\n    )\n\n    actionsHandler.hooks.on(\n      actionsHandler.hooks.eventTypes.end,\n      (e: TouchEvent) => {\n        if (!this.enabled) return true\n\n        const { x, y, scale } = this.translater\n        this.hooks.trigger(this.hooks.eventTypes.touchEnd, {\n          x,\n          y\n        })\n\n        this.animater.pending = false\n\n        // ensures that the last position is rounded\n        let newX = Math.round(x)\n        let newY = Math.round(y)\n\n        let deltaX = newX - this.absStartX\n        let deltaY = newY - this.absStartY\n        this.directionX =\n          deltaX > 0\n            ? Direction.Right\n            : deltaX < 0\n            ? Direction.Left\n            : Direction.Default\n        this.directionY =\n          deltaY > 0\n            ? Direction.Down\n            : deltaY < 0\n            ? Direction.Up\n            : Direction.Default\n\n        // TODO PullDown\n\n        // check if it is a click operation\n        if (this.checkClick(e)) {\n          this.hooks.trigger(this.hooks.eventTypes.scrollCancel)\n          return\n        }\n\n        // reset if we are outside of the boundaries\n        if (this.resetPosition(this.options.bounceTime, ease.bounce)) {\n          return\n        }\n\n        this.animater.translate(newX, newY, scale)\n\n        this.endTime = e.timeStamp\n        let duration = this.endTime - this.startTime\n        let absDistX = Math.abs(newX - this.startX)\n        let absDistY = Math.abs(newY - this.startY)\n\n        // flick\n        if (\n          duration < this.options.flickLimitTime &&\n          absDistX < this.options.flickLimitDistance &&\n          absDistY < this.options.flickLimitDistance\n        ) {\n          this.hooks.trigger('flick')\n          return\n        }\n\n        let time = 0\n        // start momentum animation if needed\n        if (\n          this.options.momentum &&\n          duration < this.options.momentumLimitTime &&\n          (absDistY > this.options.momentumLimitDistance ||\n            absDistX > this.options.momentumLimitDistance)\n        ) {\n          let top = false\n          let bottom = false\n          let left = false\n          let right = false\n          const bounce = this.options.bounce as Partial<bounceConfig>\n          if (bounce !== false) {\n            top = bounce.top === undefined ? true : bounce.top\n            bottom = bounce.bottom === undefined ? true : bounce.bottom\n            left = bounce.left === undefined ? true : bounce.left\n            right = bounce.right === undefined ? true : bounce.right\n          }\n          const wrapperWidth =\n            (this.directionX === Direction.Right && left) ||\n            (this.directionX === Direction.Left && right)\n              ? this.wrapperWidth\n              : 0\n          const wrapperHeight =\n            (this.directionY === Direction.Down && top) ||\n            (this.directionY === Direction.Up && bottom)\n              ? this.wrapperHeight\n              : 0\n\n          let momentumX = this.hasHorizontalScroll\n            ? momentum(\n                this.translater.x,\n                this.startX,\n                duration,\n                this.maxScrollX,\n                this.minScrollX,\n                wrapperWidth,\n                this.options\n              )\n            : { destination: newX, duration: 0 }\n          let momentumY = this.hasVerticalScroll\n            ? momentum(\n                this.translater.y,\n                this.startY,\n                duration,\n                this.maxScrollY,\n                this.minScrollY,\n                wrapperHeight,\n                this.options\n              )\n            : { destination: newY, duration: 0 }\n          newX = momentumX.destination\n          newY = momentumY.destination\n          time = Math.max(momentumX.duration, momentumY.duration)\n          this.animater.pending = true\n        }\n\n        let easing\n        if (newX !== this.translater.x || newY !== this.translater.y) {\n          // change easing function when scroller goes out of the boundaries\n          if (\n            newX > this.minScrollX ||\n            newX < this.maxScrollX ||\n            newY > this.minScrollY ||\n            newY < this.maxScrollY\n          ) {\n            easing = ease.swipeBounce\n          }\n          this.scrollTo(newX, newY, time, easing)\n          return\n        }\n\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, {\n          x: this.translater.x,\n          y: this.translater.y\n        })\n      }\n    )\n  }\n\n  createActionsHandlerOpt() {\n    const options = [\n      'bindToWrapper',\n      'click',\n      'disableMouse',\n      'preventDefault',\n      'stopPropagation',\n      'preventDefaultException'\n    ].reduce<ActionsHandlerOptions>(\n      (prev, cur) => {\n        prev[cur] = this.options[cur]\n        return prev\n      },\n      {} as ActionsHandlerOptions\n    )\n    return options\n  }\n\n  refresh() {\n    const wrapper = this.wrapper as HTMLElement\n    const isWrapperStatic =\n      window.getComputedStyle(wrapper, null).position === 'static'\n    let wrapperRect = getRect(wrapper)\n    this.wrapperWidth = wrapperRect.width\n    this.wrapperHeight = wrapperRect.height\n\n    let elementRect = getRect(this.element)\n    this.elementWidth = Math.round(elementRect.width * this.translater.scale)\n    this.elementHeight = Math.round(elementRect.height * this.translater.scale)\n\n    this.relativeX = elementRect.left\n    this.relativeY = elementRect.top\n\n    if (isWrapperStatic) {\n      this.relativeX -= wrapperRect.left\n      this.relativeY -= wrapperRect.top\n    }\n\n    this.minScrollX = 0\n    this.minScrollY = 0\n\n    this.maxScrollX = this.wrapperWidth - this.elementWidth\n    this.maxScrollY = this.wrapperHeight - this.elementHeight\n    if (this.maxScrollX < 0) {\n      this.maxScrollX -= this.relativeX\n      this.minScrollX = -this.relativeX\n    } else if (this.translater.scale > 1) {\n      this.maxScrollX = this.maxScrollX / 2 - this.relativeX\n      this.minScrollX = this.maxScrollX\n    }\n    if (this.maxScrollY < 0) {\n      this.maxScrollY -= this.relativeY\n      this.minScrollY = -this.relativeY\n    } else if (this.translater.scale > 1) {\n      this.maxScrollY = this.maxScrollY / 2 - this.relativeY\n      this.minScrollY = this.maxScrollY\n    }\n\n    this.hasHorizontalScroll =\n      this.options.scrollX && this.maxScrollX < this.minScrollX\n    this.hasVerticalScroll =\n      this.options.scrollY && this.maxScrollY < this.minScrollY\n\n    if (!this.hasHorizontalScroll) {\n      this.maxScrollX = this.minScrollX\n      this.elementWidth = this.wrapperWidth\n    }\n\n    if (!this.hasVerticalScroll) {\n      this.maxScrollY = this.minScrollY\n      this.elementHeight = this.wrapperHeight\n    }\n\n    this.endTime = 0\n    this.directionX = 0\n    this.directionY = 0\n    this.wrapperOffset = offset(wrapper)\n\n    this.animater.refresh({\n      minScrollX: this.minScrollX,\n      maxScrollX: this.maxScrollX,\n      minScrollY: this.minScrollY,\n      maxScrollY: this.maxScrollY,\n      hasHorizontalScroll: this.hasHorizontalScroll,\n      hasVerticalScroll: this.hasVerticalScroll\n    })\n  }\n\n  private addDOMEvents() {\n    const eventOperation = addEvent\n    this.handleDOMEvents(eventOperation)\n  }\n\n  private removeDOMEvents() {\n    const eventOperation = removeEvent\n    this.handleDOMEvents(eventOperation)\n  }\n\n  private handleDOMEvents(eventOperation: Function) {\n    eventOperation(window, 'orientationchange', this)\n    eventOperation(window, 'resize', this)\n\n    eventOperation(this.element, style.transitionEnd, this)\n  }\n  private handleEvent(e: TouchEvent) {\n    switch (e.type) {\n      case 'orientationchange':\n      case 'resize':\n        this.resize()\n        break\n      case 'click':\n        // ensure click event triggered only once in pc\n        if (this.enabled && !e._constructed) {\n          if (\n            !preventDefaultExceptionFn(\n              e.target,\n              this.options.preventDefaultException\n            )\n          ) {\n            e.preventDefault()\n            e.stopPropagation()\n          }\n        }\n        break\n      case 'transitionend':\n      case 'webkitTransitionEnd':\n      case 'oTransitionEnd':\n      case 'MSTransitionEnd':\n        this.transitionEnd(e)\n        break\n    }\n  }\n\n  private resize() {\n    if (!this.enabled) {\n      return\n    }\n    // fix a scroll problem under Android condition\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0\n    }\n    clearTimeout(this.resizeTimeout)\n    this.resizeTimeout = window.setTimeout(() => {\n      this.refresh()\n    }, this.options.resizePolling)\n  }\n\n  private transitionEnd(e: TouchEvent) {\n    // ensure pending\n    if (e.target !== this.element || !this.animater.pending) {\n      return\n    }\n\n    ;(this.animater as Transition).transitionTime()\n    // TODO when pullingDown, do not reset position\n    // const needReset = this.movingDirectionY === Direction.Up\n    if (\n      !this.resetPosition(this.options.bounceTime, ease.bounce)\n    ) {\n      this.animater.pending = false\n      if (this.options.probeType !== Probe.Realtime) {\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, {\n          x: this.translater.x,\n          y: this.translater.y\n        })\n      }\n    }\n  }\n\n  private checkClick(e: TouchEvent) {\n    // when in the process of pulling down, it should not prevent click\n    let preventClick = this.animater.forceStopped\n    this.animater.forceStopped = false\n\n    // we scrolled less than momentumLimitDistance pixels\n    if (!this.moved) {\n      if (!preventClick) {\n        if (this.options.tap) {\n          tap(e, this.options.tap)\n        }\n        if (\n          this.options.click &&\n          !preventDefaultExceptionFn(\n            e.target,\n            this.options.preventDefaultException\n          )\n        ) {\n          click(e)\n        }\n        return true\n      }\n      return false\n    }\n    return false\n  }\n\n  scrollBy(deltaX: number, deltaY: number, time = 0, easing = ease.bounce) {\n    deltaX += this.translater.x\n    deltaY += this.translater.y\n\n    this.scrollTo(deltaX, deltaY, time, easing)\n  }\n\n  scrollTo(x: number, y: number, time = 0, easing = ease.bounce) {\n    const easingFn = this.options.useTransition ? easing.style : easing.fn\n\n    // when x or y has changed\n    if (x !== this.translater.x || y !== this.translater.y) {\n      this.animater.scrollTo(x, y, time, easingFn)\n    }\n  }\n\n  scrollToElement(\n    el: HTMLElement | string,\n    time: number,\n    offsetX: number | boolean,\n    offsetY: number | boolean,\n    easing: {\n      style: string\n      fn: EaseFn\n    }\n  ) {\n    el = ((el as HTMLElement).nodeType\n      ? el\n      : this.element.querySelector(el as string)) as HTMLElement\n\n    let pos = offset(el)\n    pos.left -= this.wrapperOffset.left\n    pos.top -= this.wrapperOffset.top\n\n    // if offsetX/Y are true we center the element to the screen\n    if (offsetX === true) {\n      offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2)\n    }\n    if (offsetY === true) {\n      offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2)\n    }\n\n    pos.left -= offsetX || 0\n    pos.top -= offsetY || 0\n    pos.left =\n      pos.left > this.minScrollX\n        ? this.minScrollX\n        : pos.left < this.maxScrollX\n        ? this.maxScrollX\n        : pos.left\n    pos.top =\n      pos.top > this.minScrollY\n        ? this.minScrollY\n        : pos.top < this.maxScrollY\n        ? this.maxScrollY\n        : pos.top\n\n    this.scrollTo(pos.left, pos.top, time, easing)\n  }\n\n  resetPosition(time = 0, easing = ease.bounce) {\n    return this.animater.resetPosition(time, easing)\n  }\n}\n","import EventEmitter from './base/EventEmitter'\nimport Options from './Options'\nimport Scroller from './scroller/Scroller'\n\nimport { warn } from './util'\n\nexport interface Plugin {\n  install: (ctor: BScroll, options?: any[]) => void\n  new (): void\n}\n\ninterface PluginsMap {\n  [name: string]: {\n    new (bs: BScroll): void\n  }\n}\n\nexport default class BScroll extends EventEmitter {\n  static readonly version: string = '2.0.0'\n  static _installedPlugins?: Plugin[]\n  static _pluginsMap: PluginsMap\n\n  scroller: Scroller\n  options: Options\n  hooks: EventEmitter\n  [key: string]: any\n\n  static use(plugin: Plugin, ...options: any[]) {\n    const installedPlugins =\n      this._installedPlugins || (this._installedPlugins = [])\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n    options.unshift(this)\n    plugin.install && plugin.install.apply(plugin, options as any)\n\n    installedPlugins.push(plugin)\n    return this\n  }\n\n  static plugin(\n    name: string,\n    ctor: {\n      new (): void\n    }\n  ) {\n    if (!this._pluginsMap) {\n      this._pluginsMap = {}\n    }\n    if (this._pluginsMap[name]) {\n      warn(\n        `This plugin has been registered, maybe you need change plugin's name`\n      )\n    }\n    this._pluginsMap[name] = ctor\n  }\n\n  constructor(el: HTMLElement | string, options?: object) {\n    super(['refresh', 'scrollStart'])\n    const wrapper = (typeof el === 'string'\n      ? document.querySelector(el)\n      : el) as HTMLElement\n\n    if (!wrapper) {\n      warn('Can not resolve the wrapper DOM.')\n      return\n    }\n    const scrollElement = wrapper.children[0]\n    if (!scrollElement) {\n      warn('The wrapper need at least one child element to be scroller.')\n      return\n    }\n    this.options = new Options().merge(options).process()\n    this.hooks = new EventEmitter(['init'])\n    this.init(wrapper)\n  }\n\n  private init(wrapper: HTMLElement) {\n    this.scroller = new Scroller(wrapper as HTMLElement, this.options)\n\n    this.hooks.trigger(this.hooks.eventTypes.init)\n    this.applyPlugins()\n\n    if (this.options.autoBlur) {\n      this.handleAutoBlur()\n    }\n\n    this.refresh()\n\n    if (!this.options.slide) {\n      this.scroller.scrollTo(this.options.startX, this.options.startY)\n    }\n    this.enable()\n  }\n\n  private applyPlugins() {\n    const options = this.options\n    const _pluginsMap = (<typeof BScroll>this.constructor)._pluginsMap || {}\n    let ctor\n    for (let pluginName in _pluginsMap) {\n      ctor = _pluginsMap[pluginName]\n      if (options[pluginName]) {\n        typeof ctor === 'function' && new ctor(this)\n      }\n    }\n  }\n\n  private handleAutoBlur() {\n    this.on(this.eventTypes.scrollStart, () => {\n      let activeElement = document.activeElement as HTMLElement\n      if (\n        activeElement &&\n        (activeElement.tagName === 'INPUT' ||\n          activeElement.tagName === 'TEXTAREA')\n      ) {\n        activeElement.blur()\n      }\n    })\n  }\n  refresh() {\n    this.scroller.refresh()\n    this.trigger(this.eventTypes.refresh)\n    this.scroller.resetPosition()\n  }\n\n  enable() {}\n\n  disable() {}\n\n  destroy() {}\n}\n"],"names":["warn","msg","console","error","Probe","Direction","EventType","DirectionLock","MouseButton","EventPassthrough","names","this","_events","eventTypes","forEach","type","_this","EventEmitter","fn","context","_checkInTypes","push","magic","_i","args","off","apply","on","count","length","splice","events","len","eventsCopy","i","event_1","types","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","getNow","performance","now","timing","navigationStart","Date","extend","target","rest","source","key","isUndef","v","elementStyle","document","createElement","style","vendor","transformNames","webkit","Moz","O","ms","standard","undefined","prefixStyle","charAt","toUpperCase","substr","addEvent","el","capture","addEventListener","passive","removeEvent","removeEventListener","offset","left","top","offsetLeft","offsetTop","offsetParent","transform","transition","hasPerspective","hasTouch","hasTransform","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","eventTypeMap","touchstart","Touch","touchmove","touchend","mousedown","Mouse","mousemove","mouseup","getRect","SVGElement","rect","getBoundingClientRect","width","height","offsetWidth","offsetHeight","preventDefaultExceptionFn","exceptions","ease","t","momentum","current","start","time","lowerMargin","upperMargin","wrapperSize","options","distance","speed","Math","abs","deceleration","itemHeight","swipeBounceTime","wheel","duration","rate","destination","round","max","min","windowCompat","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","None","click","tap","bounce","bounceTime","momentumLimitTime","momentumLimitDistance","swipeTime","flickLimitTime","flickLimitDistance","resizePolling","probeType","Default","stopPropagation","preventDefault","preventDefaultException","tagName","HWCompositing","useTransition","useTransform","bindToWrapper","disableMouse","observeDOM","autoBlur","picker","slide","scrollbar","pullDownRefresh","pullUpLoad","mouseWheel","zoom","infinity","dblclick","Options","translateZ","wrapper","hooks","addDOMEvents","ActionsHandler","eventOperation","handleDOMEvents","_a","e","move","end","_eventType","initiated","button","Left","point","touches","pointX","pageX","pointY","pageY","trigger","timeStamp","deltaX","deltaY","actionsHandler","scrollLeft","documentElement","pageXOffset","body","scrollTop","pageYOffset","pX","pY","clientWidth","clientHeight","element","setUpProps","Base","scale","lastScale","x","y","setScale","_super","tslib_1.__extends","Position","cssStyle","getComputedStyle","replace","updateProps","Transform","matrix","split","translater","boundaryInfo","Object","keys","updatePosition","easing","roundX","hasHorizontalScroll","minScrollX","maxScrollX","roundY","hasVerticalScroll","minScrollY","maxScrollY","scrollTo","Error","eventType","pos","Transition","probe","getComputedPosition","callHooks","scroll","pending","timer","scrollEnd","easingFn","transitionTime","Realtime","startProbe","_reflow","resetPosition","translate","forceStopped","easingStyle","_resetPosition","Animation","animate","destX","destY","startScale","destScale","startTime","destTime","step","newX","newY","newScale","children","animater","createActionsHandlerOpt","enabled","moved","directionX","directionY","movingDirectionX","movingDirectionY","directionLocked","absStartX","absStartY","stop","beforeScrollStart","absDistX","absDistY","endTime","Horizontal","Vertical","Right","Down","Up","bottom","right","scrollStart","Throttle","touchEnd","checkClick","scrollCancel","top_1","wrapperWidth","wrapperHeight","momentumX","momentumY","Scroller","reduce","prev","cur","isWrapperStatic","position","wrapperRect","elementRect","elementWidth","elementHeight","relativeX","relativeY","wrapperOffset","refresh","resize","_constructed","resizeTimeout","eventName","ev","preventClick","createEvent","initEvent","dispatchEvent","event","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","cancelable","MouseEvent","forwardedTouchEvent","offsetX","offsetY","nodeType","querySelector","merge","process","init","BScroll","plugin","installedPlugins","_installedPlugins","unshift","install","name","ctor","_pluginsMap","scroller","applyPlugins","handleAutoBlur","enable","constructor","pluginName","activeElement","blur"],"mappings":"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"}