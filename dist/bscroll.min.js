!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.BScroll=e()}(this,function(){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function i(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function s(t){console.error("[BScroll warn]: "+t)}var y,t,x,e,a,n,d,r,l,h,v,c,p=function(){function t(t){var e=this;this._events={},this.eventTypes={},t.forEach(function(t){e.eventTypes[t]=t})}return t.prototype.on=function(t,e,i){return void 0===i&&(i=this),this._checkInTypes(t),this._events[t]||(this._events[t]=[]),this._events[t].push([e,i]),this},t.prototype.once=function(i,o,n){var s=this;void 0===n&&(n=this),this._checkInTypes(i);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.off(i,r),o.apply(n,t)};return r.fn=o,this.on(i,r),this},t.prototype.off=function(t,e){this._checkInTypes(t);var i=this._events[t];if(!i)return this;for(var o=i.length;o--;)(i[o][0]===e||i[o][0]&&i[o][0].fn===e)&&i.splice(o,1);return this},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._checkInTypes(t);var o=this._events[t];if(o)for(var n=o.length,s=o.slice(),r=0;r<n;r++){var a=s[r],l=a[0],h=a[1];if(l)if(!0===l.apply(h,e))break}},t.prototype._checkInTypes=function(t){var e=this.eventTypes;e[t]===t||s('EventEmitter has used unknown event type: "'+t+'", should be oneof '+e)},t}();(t=y||(y={}))[t.Default=0]="Default",t[t.Throttle=1]="Throttle",t[t.Normal=2]="Normal",t[t.Realtime=3]="Realtime",(e=x||(x={}))[e.Up=1]="Up",e[e.Left=1]="Left",e[e.Down=-1]="Down",e[e.Right=-1]="Right",e[e.Default=0]="Default",(n=a||(a={}))[n.Touch=1]="Touch",n[n.Mouse=2]="Mouse",(r=d||(d={}))[r.Default=0]="Default",r[r.Horizontal=1]="Horizontal",r[r.Vertical=2]="Vertical",r[r.None=3]="None",(h=l||(l={}))[h.Left=0]="Left",h[h.Middle=1]="Middle",h[h.Right=2]="Right",(c=v||(v={})).None="",c.Horizontal="horizontal",c.Vertical="vertical";var u="undefined"!=typeof window,m=u&&navigator.userAgent.toLowerCase(),f=m&&/wechatdevtools/.test(m),g=m&&0<m.indexOf("android");function T(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date}function S(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=0;o<e.length;o++){var n=e[o];for(var s in n)t[s]=n[s]}return t}function w(t){return null==t}var k=u&&document.createElement("div").style,b=function(){if(!u)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==k[t[e]])return e;return!1}();function X(t){return!1!==b&&("standard"===b?"transitionEnd"===t?"transitionend":t:b+t.charAt(0).toUpperCase()+t.substr(1))}function D(t,e,i,o){t.addEventListener(e,i,{passive:!1,capture:!!o})}function Y(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}function E(t){for(var e=0,i=0;t;)e-=t.offsetLeft,i-=t.offsetTop,t=t.offsetParent;return{left:e,top:i}}b&&"standard"!==b&&b.toLowerCase();var P=X("transform"),M=X("transition"),L=u&&X("perspective")in k,H=u&&("ontouchstart"in window||f),O=!1!==P,z=u&&M in k,_={transform:P,transition:M,transitionTimingFunction:X("transitionTimingFunction"),transitionDuration:X("transitionDuration"),transitionDelay:X("transitionDelay"),transformOrigin:X("transformOrigin"),transitionEnd:X("transitionEnd")},C={touchstart:a.Touch,touchmove:a.Touch,touchend:a.Touch,mousedown:a.Mouse,mousemove:a.Mouse,mouseup:a.Mouse};function A(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function R(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}var W={style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},V={style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}};function F(t,e,i,o,n,s,r){var a=t-e,l=Math.abs(a)/i,h=r.deceleration,c=r.itemHeight,p=r.swipeBounceTime,u=r.wheel,m=r.swipeTime,f=u?4:15,d=t+l/h*(a<0?-1:1);return u&&c&&(d=Math.round(d/c)*c),d<o?(d=s?Math.max(o-s/4,o-s/f*l):o,m=p):n<d&&(d=s?Math.min(n+s/4,n+s/f*l):n,m=p),{destination:Math.round(d),duration:m}}var N=window;function U(){}var B=u?N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||function(t){return window.setTimeout(t,(t.interval||100/60)/2)}:U,I=u?N.cancelAnimationFrame||N.webkitCancelAnimationFrame||N.mozCancelAnimationFrame||N.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:U,q=function(){function t(){this.startX=0,this.startY=0,this.scrollX=!1,this.scrollY=!0,this.freeScroll=!1,this.directionLockThreshold=5,this.eventPassthrough=v.None,this.click=!1,this.tap="",this.bounce=!0,this.bounceTime=800,this.momentum=!0,this.momentumLimitTime=300,this.momentumLimitDistance=15,this.swipeTime=2500,this.swipeBounceTime=500,this.deceleration=.0015,this.flickLimitTime=200,this.flickLimitDistance=100,this.resizePolling=60,this.probeType=y.Default,this.stopPropagation=!1,this.preventDefault=!0,this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},this.HWCompositing=!0,this.useTransition=!0,this.useTransform=!0,this.bindToWrapper=!1,this.disableMouse=H,this.observeDOM=!0,this.autoBlur=!0,this.picker=!1,this.slide=!1,this.scrollbar=!1,this.pullDownRefresh=!1,this.pullUpLoad=!1,this.mouseWheel=!1,this.zoom=!1,this.infinity=!1,this.dblclick=!1}return t.prototype.merge=function(t){if(!t)return this;for(var e in t)this[e]=t[e];return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&L?" translateZ(0)":"",this.useTransition=this.useTransition&&z,this.useTransform=this.useTransform&&O,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t}(),Z=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new p(["start","move","end"]),this.addDOMEvents()}return t.prototype.addDOMEvents=function(){var t=D;this.handleDOMEvents(t)},t.prototype.removeDOMEvents=function(){var t=Y;this.handleDOMEvents(t)},t.prototype.handleDOMEvents=function(t){var e=this.options,i=e.bindToWrapper,o=e.click,n=e.disableMouse,s=this.wrapper,r=i?s:window;t(window,"orientationchange",this),t(window,"resize",this),o&&t(s,"click",this,!0),n||(t(s,"mousedown",this),t(r,"mousemove",this),t(r,"mousecancel",this),t(r,"mouseup",this)),n&&(t(s,"touchstart",this),t(r,"touchmove",this),t(r,"touchcancel",this),t(r,"touchend",this))},t.prototype.handleEvent=function(t){switch(t.type){case"touchstart":case"mousedown":this.start(t);break;case"touchmove":case"mousemove":this.move(t);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this.end(t)}},t.prototype.start=function(t){var e=C[t.type];if(!(this.initiated&&this.initiated!==e||(this.initiated=e)===a.Mouse&&t.button!==l.Left)){var i=this.options,o=i.preventDefault,n=i.stopPropagation,s=i.preventDefaultException;o&&!R(t.target,s)&&t.preventDefault(),n&&t.stopPropagation();var r=t.touches?t.touches[0]:t;this.pointX=r.pageX,this.pointY=r.pageY,this.hooks.trigger(this.hooks.eventTypes.start,{timeStamp:t.timeStamp})}},t.prototype.move=function(t){if(C[t.type]===this.initiated){var e=this.options,i=e.preventDefault,o=e.stopPropagation,n=e.preventDefaultException;i&&!R(t.target,n)&&t.preventDefault(),o&&t.stopPropagation();var s=t.touches?t.touches[0]:t,r=s.pageX-this.pointX,a=s.pageY-this.pointY;if(this.pointX=s.pageX,this.pointY=s.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{timeStamp:t.timeStamp,deltaX:r,deltaY:a,e:t,actionsHandler:this})){var l=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,h=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,c=this.pointX-l,p=this.pointY-h;(c>document.documentElement.clientWidth-this.options.momentumLimitDistance||c<this.options.momentumLimitDistance||p<this.options.momentumLimitDistance||p>document.documentElement.clientHeight-this.options.momentumLimitDistance)&&this.end(t)}}},t.prototype.end=function(t){if(C[t.type]===this.initiated){this.initiated=!1;var e=this.options,i=e.preventDefault,o=e.stopPropagation,n=e.preventDefaultException;i&&!R(t.target,n)&&t.preventDefault(),o&&t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.end,t)}},t.prototype.setPointPosition=function(t){var e=t.touches?t.touches[0]:t;return this.pointX=e.pageX,this.pointY=e.pageY,e},t}(),j=function(){function t(t){this.element=t,this.style=t.style,this.setUpProps()}return t.prototype.setScale=function(t){this.lastScale=w(this.scale)?t:this.scale,this.scale=t},t.prototype.updateProps=function(t,e,i){this.x=t,this.y=e,this.setScale(i)},t.prototype.setUpProps=function(){this.x=0,this.y=0,this.setScale(1)},t}(),G=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.element,null);return{x:+t.left.replace(/[^-\d.]/g,""),y:+t.top.replace(/[^-\d.]/g,"")}},t.prototype.updatePosition=function(t,e,i){this.style.left=Math.round(t)+"px",this.style.top=Math.round(e)+"px",this.updateProps(t,e,i)},t}(j),$=function(o){function t(t,e){var i=o.call(this,t)||this;return i.options=e,i}return i(t,o),t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.element,null)[_.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4]),y:+(t[13]||t[5])}},t.prototype.updatePosition=function(t,e,i){this.style[_.transform]="translate("+t+"px,"+e+"px) scale("+i+")"+this.options.translateZ,this.updateProps(t,e,i)},t}(j),J=function(){function t(t,e,i){this.element=t,this.translater=e,this.options=i,this.hooks=new p(["scroll","scrollEnd"]),this.style=t.style}return t.prototype.refresh=function(e){var i=this;Object.keys(e).forEach(function(t){i[t]=e[t]})},t.prototype.translate=function(t,e,i){this.translater.updatePosition(t,e,i)},t.prototype._resetPosition=function(t,e){var i=this.translater.x,o=Math.round(i);!this.hasHorizontalScroll||o>this.minScrollX?i=this.minScrollX:o<this.maxScrollX&&(i=this.maxScrollX);var n=this.translater.y,s=Math.round(n);return!this.hasVerticalScroll||s>this.minScrollY?n=this.minScrollY:s<this.maxScrollY&&(n=this.maxScrollY),(i!==this.translater.x||n!==this.translater.y)&&(this.scrollTo(i,n,t,e),!0)},t.prototype.callHooks=function(t,e){e=w(e)?{x:this.translater.x,y:this.translater.y}:e,this.hooks.trigger(t,e)},t}(),K=function(o){function t(t,e,i){return o.call(this,t,e,i)||this}return i(t,o),t.prototype.startProbe=function(){var e=this,i=function(){var t=e.translater.getComputedPosition();e.callHooks(e.hooks.eventTypes.scroll,t),e.pending?e.timer=B(i):e.callHooks(e.hooks.eventTypes.scrollEnd,t)};I(this.timer),this.timer=B(i)},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.style[_.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.style[_.transitionTimingFunction]=t},t.prototype.scrollTo=function(t,e,i,o){this.pending=0<i,this.transitionTimingFunction(o),this.transitionTime(i),this.translater.updatePosition(t,e,this.translater.scale),i&&this.options.probeType===y.Realtime&&this.startProbe(),i||(this.callHooks(this.hooks.eventTypes.scroll,{x:t,y:e}),this._reflow=document.body.offsetHeight,this.resetPosition(this.options.bounceTime)||this.callHooks(this.hooks.eventTypes.scrollEnd))},t.prototype.stop=function(){if(this.pending){this.pending=!1,I(this.timer);var t=this.translater.getComputedPosition();this.transitionTime(),this.translate(t.x,t.y,this.translater.scale),this.callHooks(this.hooks.eventTypes.scrollEnd,{x:t.x,y:t.y}),this.forceStopped=!0}},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=V);var i=e.style;return this._resetPosition(t,i)},t}(J),Q=function(o){function t(t,e,i){return o.call(this,t,e,i)||this}return i(t,o),t.prototype.scrollTo=function(t,e,i,o){if(!i)return this.translater.updatePosition(t,e,this.translater.scale),this.hooks.trigger(this.hooks.eventTypes.scroll,{x:t,y:e}),this._reflow=document.body.offsetHeight,void(this.resetPosition(this.options.bounceTime)||this.hooks.trigger(this.hooks.eventTypes.scrollEnd,{x:this.translater.x,y:this.translater.y}));this.animate(t,e,i,o)},t.prototype.animate=function(s,r,a,l){var h=this,c=this.translater.x,p=this.translater.y,u=this.translater.lastScale,m=this.translater.scale,f=T(),d=f+a,v=function(){var t=T();if(d<=t)return h.pending=!1,h.translate(s,r,m),h.callHooks(h.hooks.eventTypes.scroll),void(h.resetPosition(h.options.bounceTime)||h.callHooks(h.hooks.eventTypes.scrollEnd));var e=l(t=(t-f)/a),i=(s-c)*e+c,o=(r-p)*e+p,n=(m-u)*e+u;h.translate(i,o,n),h.pending&&(h.timer=B(v)),h.options.probeType===y.Realtime&&h.callHooks(h.hooks.eventTypes.scroll)};this.pending=!0,I(this.timer),v()},t.prototype.stop=function(){var t=this.translater,e=t.x,i=t.y;this.pending&&(this.pending=!1,I(this.timer),this.callHooks(this.hooks.eventTypes.scrollEnd,{x:e,y:i}),this.forceStopped=!0)},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=V);var i=e.fn;return this._resetPosition(t,i)},t}(J),tt=function(){function t(t,e){var b=this;this.hooks=new p(["scroll","scrollEnd","refresh","beforeScrollStart","scrollStart","touchEnd","flick","scrollCancel"]),this.wrapper=t,this.element=t.children[0],this.options=e,this.translater=this.options.useTransform?new $(this.element,{translateZ:this.options.translateZ}):new G(this.element),this.animater=this.options.useTransition?new K(this.element,this.translater,{probeType:this.options.probeType,bounceTime:this.options.bounceTime}):new Q(this.element,this.translater,{probeType:this.options.probeType,bounceTime:this.options.bounceTime});var i=new Z(t,this.createActionsHandlerOpt());this.enabled=!0,this.addDOMEvents(),i.hooks.on(i.hooks.eventTypes.start,function(t){var e=t.timeStamp;if(!b.enabled)return!0;b.moved=!1,b.directionX=x.Default,b.directionY=x.Default,b.movingDirectionX=x.Default,b.movingDirectionY=x.Default,b.directionLocked=d.Default,b.startX=b.translater.x,b.startY=b.translater.y,b.absStartX=b.translater.x,b.absStartY=b.translater.y,b.startTime=e,b.animater.stop(),b.hooks.trigger(b.hooks.eventTypes.beforeScrollStart)}),i.hooks.on(i.hooks.eventTypes.move,function(t){var e=t.timeStamp,i=t.deltaX,o=t.deltaY,n=t.actionsHandler,s=t.e;if(!b.enabled)return!0;var r=Math.abs(i),a=Math.abs(o);if(e-b.endTime>b.options.momentumLimitTime&&a<b.options.momentumLimitDistance&&r<b.options.momentumLimitDistance)return!0;if(b.directionLocked||b.options.freeScroll||(r>a+b.options.directionLockThreshold?b.directionLocked=d.Horizontal:a>=r+b.options.directionLockThreshold?b.directionLocked=d.Vertical:b.directionLocked=d.None),b.directionLocked===d.Horizontal){if(b.options.eventPassthrough===v.Vertical)s.preventDefault();else if(b.options.eventPassthrough===v.Horizontal)return!(n.initiated=!1);o=0}else if(b.directionLocked===d.Vertical){if(b.options.eventPassthrough===v.Horizontal)s.preventDefault();else if(b.options.eventPassthrough===v.Vertical)return!(n.initiated=!1);i=0}i=b.hasHorizontalScroll?i:0,o=b.hasVerticalScroll?o:0,b.movingDirectionX=0<i?x.Right:i<0?x.Left:x.Default,b.movingDirectionY=0<o?x.Down:o<0?x.Up:x.Default;var l=b.translater.x+i,h=b.translater.y+o,c=!1,p=!1,u=!1,m=!1,f=b.options.bounce;!1!==f&&(c=void 0===f.top||f.top,p=void 0===f.bottom||f.bottom,u=void 0===f.left||f.left,m=void 0===f.right||f.right),(l>b.minScrollX||l<b.maxScrollX)&&(l=l>b.minScrollX&&u||l<b.maxScrollX&&m?b.translater.x+i/3:l>b.minScrollX?b.minScrollX:b.maxScrollX),(h>b.minScrollY||h<b.maxScrollY)&&(h=h>b.minScrollY&&c||h<b.maxScrollY&&p?b.translater.y+o/3:h>b.minScrollY?b.minScrollY:b.maxScrollY),b.moved||(b.moved=!0,b.hooks.trigger(b.hooks.eventTypes.scrollStart)),b.animater.translate(l,h,b.translater.scale),e-b.startTime>b.options.momentumLimitTime&&(b.startTime=e,b.startX=b.translater.x,b.startY=b.translater.y,b.options.probeType===y.Throttle&&b.hooks.trigger(b.hooks.eventTypes.scroll,{x:b.translater.x,y:b.translater.y})),b.options.probeType>y.Throttle&&b.hooks.trigger(b.hooks.eventTypes.scroll,{x:b.translater.x,y:b.translater.y})}),i.hooks.on(i.hooks.eventTypes.end,function(t){if(!b.enabled)return!0;var e=b.translater,i=e.x,o=e.y,n=e.scale;b.hooks.trigger(b.hooks.eventTypes.touchEnd,{x:i,y:o}),b.animater.pending=!1;var s=Math.round(i),r=Math.round(o),a=s-b.absStartX,l=r-b.absStartY;if(b.directionX=0<a?x.Right:a<0?x.Left:x.Default,b.directionY=0<l?x.Down:l<0?x.Up:x.Default,b.checkClick(t))b.hooks.trigger(b.hooks.eventTypes.scrollCancel);else if(!b.resetPosition(b.options.bounceTime,V)){b.animater.translate(s,r,n),b.endTime=t.timeStamp;var h=b.endTime-b.startTime,c=Math.abs(s-b.startX),p=Math.abs(r-b.startY);if(h<b.options.flickLimitTime&&c<b.options.flickLimitDistance&&p<b.options.flickLimitDistance)b.hooks.trigger("flick");else{var u,m=0;if(b.options.momentum&&h<b.options.momentumLimitTime&&(p>b.options.momentumLimitDistance||c>b.options.momentumLimitDistance)){var f=!1,d=!1,v=!1,y=!1,g=b.options.bounce;!1!==g&&(f=void 0===g.top||g.top,d=void 0===g.bottom||g.bottom,v=void 0===g.left||g.left,y=void 0===g.right||g.right);var T=b.directionX===x.Right&&v||b.directionX===x.Left&&y?b.wrapperWidth:0,S=b.directionY===x.Down&&f||b.directionY===x.Up&&d?b.wrapperHeight:0,w=b.hasHorizontalScroll?F(b.translater.x,b.startX,h,b.maxScrollX,b.minScrollX,T,b.options):{destination:s,duration:0},k=b.hasVerticalScroll?F(b.translater.y,b.startY,h,b.maxScrollY,b.minScrollY,S,b.options):{destination:r,duration:0};s=w.destination,r=k.destination,m=Math.max(w.duration,k.duration),b.animater.pending=!0}if(s!==b.translater.x||r!==b.translater.y)return(s>b.minScrollX||s<b.maxScrollX||r>b.minScrollY||r<b.maxScrollY)&&(u=W),void b.scrollTo(s,r,m,u);b.hooks.trigger(b.hooks.eventTypes.scrollEnd,{x:b.translater.x,y:b.translater.y})}}})}return t.prototype.createActionsHandlerOpt=function(){var i=this;return["bindToWrapper","click","disableMouse","preventDefault","stopPropagation","preventDefaultException"].reduce(function(t,e){return t[e]=i.options[e],t},{})},t.prototype.refresh=function(){var t=this.wrapper,e="static"===window.getComputedStyle(t,null).position,i=A(t);this.wrapperWidth=i.width,this.wrapperHeight=i.height;var o=A(this.element);this.elementWidth=Math.round(o.width*this.translater.scale),this.elementHeight=Math.round(o.height*this.translater.scale),this.relativeX=o.left,this.relativeY=o.top,e&&(this.relativeX-=i.left,this.relativeY-=i.top),this.minScrollX=0,this.minScrollY=0,this.maxScrollX=this.wrapperWidth-this.elementWidth,this.maxScrollY=this.wrapperHeight-this.elementHeight,this.maxScrollX<0?(this.maxScrollX-=this.relativeX,this.minScrollX=-this.relativeX):1<this.translater.scale&&(this.maxScrollX=this.maxScrollX/2-this.relativeX,this.minScrollX=this.maxScrollX),this.maxScrollY<0?(this.maxScrollY-=this.relativeY,this.minScrollY=-this.relativeY):1<this.translater.scale&&(this.maxScrollY=this.maxScrollY/2-this.relativeY,this.minScrollY=this.maxScrollY),this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<this.minScrollX,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<this.minScrollY,this.hasHorizontalScroll||(this.maxScrollX=this.minScrollX,this.elementWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=this.minScrollY,this.elementHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=E(t),this.animater.refresh({minScrollX:this.minScrollX,maxScrollX:this.maxScrollX,minScrollY:this.minScrollY,maxScrollY:this.maxScrollY,hasHorizontalScroll:this.hasHorizontalScroll,hasVerticalScroll:this.hasVerticalScroll})},t.prototype.addDOMEvents=function(){var t=D;this.handleDOMEvents(t)},t.prototype.removeDOMEvents=function(){var t=Y;this.handleDOMEvents(t)},t.prototype.handleDOMEvents=function(t){t(window,"orientationchange",this),t(window,"resize",this),t(this.element,_.transitionEnd,this)},t.prototype.handleEvent=function(t){switch(t.type){case"orientationchange":case"resize":this.resize();break;case"click":this.enabled&&!t._constructed&&(R(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation()));break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this.transitionEnd(t)}},t.prototype.resize=function(){var t=this;this.enabled&&(g&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){t.refresh()},this.options.resizePolling))},t.prototype.transitionEnd=function(t){t.target===this.element&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,V)||(this.animater.pending=!1,this.options.probeType!==y.Realtime&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,{x:this.translater.x,y:this.translater.y})))},t.prototype.checkClick=function(t){var e,i,o,n=this.animater.forceStopped;return this.animater.forceStopped=!1,!this.moved&&(!n&&(this.options.tap&&(e=t,i=this.options.tap,(o=document.createEvent("Event")).initEvent(i,!0,!0),o.pageX=e.pageX,o.pageY=e.pageY,e.target.dispatchEvent(o)),this.options.click&&!R(t.target,this.options.preventDefaultException)&&function(t,e){var i;void 0===e&&(e="click"),"mouseup"===t.type||"mousecancel"===t.type?i=t:"touchend"!==t.type&&"touchcancel"!==t.type||(i=t.changedTouches[0]);var o,n={};i&&(n.screenX=i.screenX||0,n.screenY=i.screenY||0,n.clientX=i.clientX||0,n.clientY=i.clientY||0);var s=!0,r=!0;if("undefined"!=typeof MouseEvent)try{o=new MouseEvent(e,S({bubbles:s,cancelable:r},n))}catch(t){a()}else a();function a(){(o=document.createEvent("Event")).initEvent(e,s,r),S(o,n)}o.forwardedTouchEvent=!0,o._constructed=!0,t.target.dispatchEvent(o)}(t),!0))},t.prototype.scrollBy=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=V),t+=this.translater.x,e+=this.translater.y,this.scrollTo(t,e,i,o)},t.prototype.scrollTo=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=V);var n=this.options.useTransition?o.style:o.fn;t===this.translater.x&&e===this.translater.y||this.animater.scrollTo(t,e,i,n)},t.prototype.scrollToElement=function(t,e,i,o,n){var s=E(t=t.nodeType?t:this.element.querySelector(t));s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,!0===i&&(i=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===o&&(o=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=o||0,s.left=s.left>this.minScrollX?this.minScrollX:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>this.minScrollY?this.minScrollY:s.top<this.maxScrollY?this.maxScrollY:s.top,this.scrollTo(s.left,s.top,e,n)},t.prototype.resetPosition=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=V),this.animater.resetPosition(t,e)},t}();return function(n){function t(t,e){var i=n.call(this,["refresh","scrollStart"])||this,o="string"==typeof t?document.querySelector(t):t;return o?o.children[0]?(i.options=(new q).merge(e).process(),i.hooks=new p(["init"]),i.init(o)):s("The wrapper need at least one child element to be scroller."):s("Can not resolve the wrapper DOM."),i}return i(t,n),t.plugin=function(t,e){this._pluginsMap||(this._pluginsMap={}),this._pluginsMap[t]&&s("This plugin has been registered, maybe you need change plugin's name"),this._pluginsMap[t]=e},t.prototype.init=function(t){this.scroller=new tt(t,this.options),this.applyPlugins(),this.options.autoBlur&&this.handleAutoBlur(),this.refresh(),this.options.slide||this.scroller.scrollTo(this.options.startX,this.options.startY),this.enable()},t.prototype.applyPlugins=function(){var t,e=this.options,i=this.constructor._pluginsMap||{};for(var o in i)t=i[o],e[o]&&"function"==typeof t&&new t(this)},t.prototype.handleAutoBlur=function(){this.on(this.eventTypes.scrollStart,function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()})},t.prototype.refresh=function(){this.scroller.refresh(),this.trigger(this.eventTypes.refresh),this.scroller.resetPosition()},t.prototype.enable=function(){this.scroller.enabled=!0},t.prototype.disable=function(){this.scroller.enabled=!1},t.prototype.destroy=function(){},t.version="2.0.0",t}(p)});
