!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.BScroll=e()}(this,function(){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function i(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function s(t){console.error("[BScroll warn]: "+t)}var d,t,h,e,n,r,a,l,c,p,u,f,v=function(){function t(t){var e=this;this._events={},this.eventTypes={},t.forEach(function(t){e.eventTypes[t]=t})}return t.prototype.on=function(t,e,i){return void 0===i&&(i=this),this._checkInTypes(t),this._events[t]||(this._events[t]=[]),this._events[t].push([e,i]),this},t.prototype.once=function(i,o,n){var s=this;void 0===n&&(n=this),this._checkInTypes(i);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.off(i,r),o.apply(n,t)};return r.fn=o,this.on(i,r),this},t.prototype.off=function(t,e){this._checkInTypes(t);var i=this._events[t];if(!i)return this;for(var o=i.length;o--;)(i[o][0]===e||i[o][0]&&i[o][0].fn===e)&&i.splice(o,1);return this},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._checkInTypes(t);var o=this._events[t];if(o)for(var n=o.length,s=o.slice(),r=0;r<n;r++){var h=s[r],a=h[0],l=h[1];if(a)if(!0===a.apply(l,e))break}},t.prototype._checkInTypes=function(t){var e=this.eventTypes;e[t]===t||s('EventEmitter has used unknown event type: "'+t+'", should be oneof '+e)},t}();(t=d||(d={}))[t.Default=0]="Default",t[t.Throttle=1]="Throttle",t[t.Normal=2]="Normal",t[t.Realtime=3]="Realtime",(e=h||(h={}))[e.Positive=1]="Positive",e[e.Negative=-1]="Negative",e[e.Default=0]="Default",(r=n||(n={}))[r.Touch=1]="Touch",r[r.Mouse=2]="Mouse",(l=a||(a={})).Default="",l.Horizontal="horizontal",l.Vertical="vertical",l.None="none",(p=c||(c={}))[p.Left=0]="Left",p[p.Middle=1]="Middle",p[p.Right=2]="Right",(f=u||(u={})).None="",f.Horizontal="horizontal",f.Vertical="vertical";var m="undefined"!=typeof window,y=m&&navigator.userAgent.toLowerCase(),g=y&&/wechatdevtools/.test(y),T=y&&0<y.indexOf("android");function k(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date}function w(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=0;o<e.length;o++){var n=e[o];for(var s in n)t[s]=n[s]}return t}function P(t){return null==t}var b=m&&document.createElement("div").style,S=function(){if(!m)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==b[t[e]])return e;return!1}();function x(t){return!1===S?t:"standard"===S?"transitionEnd"===t?"transitionend":t:S+t.charAt(0).toUpperCase()+t.substr(1)}function D(t,e,i,o){t.addEventListener(e,i,{passive:!1,capture:!!o})}function E(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}function B(t){for(var e=0,i=0;t;)e-=t.offsetLeft,i-=t.offsetTop,t=t.offsetParent;return{left:e,top:i}}S&&"standard"!==S&&S.toLowerCase();var X=x("transform"),Y=x("transition"),M=m&&x("perspective")in b,L=m&&("ontouchstart"in window||g),z=X in b,O=m&&Y in b,H={transform:X,transition:Y,transitionTimingFunction:x("transitionTimingFunction"),transitionDuration:x("transitionDuration"),transitionDelay:x("transitionDelay"),transformOrigin:x("transformOrigin"),transitionEnd:x("transitionEnd")},_={touchstart:n.Touch,touchmove:n.Touch,touchend:n.Touch,mousedown:n.Mouse,mousemove:n.Mouse,mouseup:n.Mouse};function C(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function A(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}var R={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},N=window;function F(){}var W=m?N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||function(t){return window.setTimeout(t,(t.interval||100/60)/2)}:F,I=m?N.cancelAnimationFrame||N.webkitCancelAnimationFrame||N.mozCancelAnimationFrame||N.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:F,V=function(){function t(){this.startX=0,this.startY=0,this.scrollX=!1,this.scrollY=!0,this.freeScroll=!1,this.directionLockThreshold=5,this.eventPassthrough=u.None,this.click=!1,this.tap="",this.bounce={top:!0,bottom:!0,left:!0,right:!0},this.bounceTime=800,this.momentum=!0,this.momentumLimitTime=300,this.momentumLimitDistance=15,this.swipeTime=2500,this.swipeBounceTime=500,this.deceleration=.0015,this.flickLimitTime=200,this.flickLimitDistance=100,this.resizePolling=60,this.probeType=d.Default,this.stopPropagation=!1,this.preventDefault=!0,this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},this.HWCompositing=!0,this.useTransition=!0,this.useTransform=!0,this.bindToWrapper=!1,this.disableMouse=L,this.observeDOM=!0,this.autoBlur=!0,this.picker=!1,this.slide=!1,this.scrollbar=!1,this.pullDownRefresh=!1,this.pullUpLoad=!1,this.mouseWheel=!1,this.zoom=!1,this.infinity=!1,this.dblclick=!1}return t.prototype.merge=function(t){if(!t)return this;for(var e in t)this[e]=t[e];return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&M?" translateZ(0)":"",this.useTransition=this.useTransition&&O,this.useTransform=this.useTransform&&z,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t}(),j=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(D)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(E)},t.prototype.handleDOMEvents=function(e){var i=this,o=this.wrapper;this.events.forEach(function(t){e(o,t.name,i,!!t.capture)})},t.prototype.handleEvent=function(e){var i=e.type;this.events.some(function(t){return t.name===i&&(t.handler(e),!0)})},t}(),q=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new v(["start","move","end","click"]),this.handleDOMEvents()}return t.prototype.handleDOMEvents=function(){var t=this.options,e=t.bindToWrapper,i=t.disableMouse,o=this.wrapper,n=e?o:window;this.startClickRegister=new j(o,[{name:i?"touchstart":"mousedown",handler:this.start.bind(this)},{name:"click",handler:this.click.bind(this)}]),this.moveEndRegister=new j(n,[{name:i?"touchmove":"mousemove",handler:this.move.bind(this)},{name:i?"touchend":"mouseup",handler:this.end.bind(this)},{name:i?"touchcancel":"mouseup",handler:this.end.bind(this)}])},t.prototype.beforeHandler=function(t){var e=this.options,i=e.preventDefault,o=e.stopPropagation,n=e.preventDefaultException;i&&!A(t.target,n)&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.start=function(t){var e=_[t.type];if(!(this.initiated&&this.initiated!==e||(this.initiated=e)===n.Mouse&&t.button!==c.Left)){this.beforeHandler(t);var i=t.touches?t.touches[0]:t;this.pointX=i.pageX,this.pointY=i.pageY,this.hooks.trigger(this.hooks.eventTypes.start)}},t.prototype.move=function(t){if(_[t.type]===this.initiated){this.beforeHandler(t);var e=t.touches?t.touches[0]:t,i=e.pageX-this.pointX,o=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:i,deltaY:o,e:t})){var n=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,s=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,r=this.pointX-n,h=this.pointY-s;(r>document.documentElement.clientWidth-this.options.momentumLimitDistance||r<this.options.momentumLimitDistance||h<this.options.momentumLimitDistance||h>document.documentElement.clientHeight-this.options.momentumLimitDistance)&&this.end(t)}}},t.prototype.end=function(t){_[t.type]===this.initiated&&(this.initiated=!1,this.beforeHandler(t),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},t.prototype.destroy=function(){this.startClickRegister.destroy(),this.moveEndRegister.destroy()},t}(),U=function(t){this.element=t,this.style=t.style},Z=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.element,null);return{x:+t.left.replace(/[^-\d.]/g,""),y:+t.top.replace(/[^-\d.]/g,"")}},t.prototype.translateTo=function(t,e){this.style.left=Math.round(t)+"px",this.style.top=Math.round(e)+"px"},t}(U),G=function(o){function t(t,e){var i=o.call(this,t)||this;return i.options=e,i}return i(t,o),t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.element,null)[H.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4]),y:+(t[13]||t[5])}},t.prototype.translateTo=function(t,e){this.style[H.transform]="translate("+t+"px,"+e+"px)"+this.options.translateZ},t}(U),$=function(){function t(t,e,i){this.element=t,this.translater=e,this.options=i,this.hooks=new v(["move","end","forceStop"]),this.style=t.style}return t.prototype.translate=function(t,e){this.translater.translateTo(t,e)},t}(),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.startProbe=function(){var e=this,i=function(){var t=e.translater.getComputedPosition();e.hooks.trigger(e.hooks.eventTypes.move,t),e.pending?e.timer=W(i):e.hooks.trigger(e.hooks.eventTypes.end,t)};I(this.timer),this.timer=W(i)},e.prototype.transitionTime=function(t){void 0===t&&(t=0),this.style[H.transitionDuration]=t+"ms"},e.prototype.transitionTimingFunction=function(t){this.style[H.transitionTimingFunction]=t},e.prototype.scrollTo=function(t,e,i,o){var n=t[1],s=e[1];this.pending=0<i,this.transitionTimingFunction(o),this.transitionTime(i),this.translate(n,s),i&&this.options.probeType===d.Realtime&&this.startProbe(),i||(this.hooks.trigger(this.hooks.eventTypes.move,{x:n,y:s}),this._reflow=document.body.offsetHeight,this.hooks.trigger(this.hooks.eventTypes.end,{x:n,y:s}))},e.prototype.stop=function(){if(this.pending){this.pending=!1,I(this.timer);var t=this.translater.getComputedPosition(),e=t.x,i=t.y;this.transitionTime(),this.translate(e,i),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:e,y:i}),this.forceStopped=!0}},e}($),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.scrollTo=function(t,e,i,o){if(!i){var n=t[1],s=e[1];return this.translate(n,s),this.hooks.trigger(this.hooks.eventTypes.move,{x:n,y:s}),this._reflow=document.body.offsetHeight,void this.hooks.trigger(this.hooks.eventTypes.end,{x:n,y:s})}this.animate(t,t,i,o)},e.prototype.animate=function(t,e,n,s){var r=this,h=t[0],a=e[0],l=t[1],c=e[1],p=k(),u=p+n,f=function(){var t=k();if(u<=t)return r.pending=!1,r.translate(l,c),r.hooks.trigger(r.hooks.eventTypes.move,{x:l,y:c}),void r.hooks.trigger(r.hooks.eventTypes.end,{x:l,y:c});var e=s(t=(t-p)/n),i=(l-h)*e+h,o=(c-a)*e+a;r.translate(i,o),r.pending&&(r.timer=W(f)),r.options.probeType===d.Realtime&&r.hooks.trigger(r.hooks.eventTypes.move,{x:i,y:o})};this.pending=!0,I(this.timer),f()},e.prototype.stop=function(){if(this.pending){this.pending=!1,I(this.timer);var t=this.translater.getComputedPosition();this.hooks.trigger(this.hooks.eventTypes.forceStop,t),this.forceStopped=!0}},e}($),Q=function(){function t(t,e){this.wrapper=t,this.options=e,this.element=this.wrapper.children[0],this.currentPos=0}return t.prototype.start=function(){this.direction=h.Default,this.movingDirection=h.Default,this.startPos=this.currentPos,this.absStartPos=this.currentPos},t.prototype.move=function(t,e){t=this.hasScroll?t:0,this.movingDirection=0<t?h.Negative:t<0?h.Positive:h.Default;var i=this.currentPos+t;return(i>this.minScrollPos||i<this.maxScrollPos)&&(i=i>this.minScrollPos&&e[0]||i<this.maxScrollPos&&e[1]?this.currentPos+t/3:i>this.minScrollPos?this.minScrollPos:this.maxScrollPos),i},t.prototype.end=function(t){var e=t.duration,i=t.bounces,o=t.startPos,n={duration:0},s=Math.abs(this.currentPos-o);if(this.options.momentum&&e<this.options.momentumLimitTime&&s>this.options.momentumLimitDistance){var r=this.direction===h.Negative&&i[0]||this.direction===h.Positive&&i[1]?this.wrapperSize:0;n=this.hasScroll?this.momentum(this.currentPos,o,e,this.maxScrollPos,this.minScrollPos,r,this.options):{destination:this.currentPos,duration:0}}return n},t.prototype.momentum=function(t,e,i,o,n,s,r){void 0===r&&(r=this.options);var h=t-e,a=Math.abs(h)/i,l=r.deceleration,c=r.swipeBounceTime,p=r.swipeTime,u=t+a/l*(h<0?-1:1);return u<o?(u=s?Math.max(o-s/4,o-s/15*a):o,p=c):n<u&&(u=s?Math.min(n+s/4,n+s/15*a):n,p=c),{destination:Math.round(u),duration:p}},t.prototype.updateDirection=function(){var t=Math.round(this.currentPos)-this.absStartPos;this.direction=0<t?h.Negative:t<0?h.Positive:h.Default},t.prototype.refresh=function(t){var e=t.size,i=t.position,o="static"===window.getComputedStyle(this.wrapper,null).position,n=C(this.wrapper);this.wrapperSize=n[e];var s=C(this.element);this.elementSize=s[e],this.relativeOffset=s[i],o&&(this.relativeOffset-=n[i]),this.minScrollPos=0,this.maxScrollPos=this.wrapperSize-this.elementSize,this.maxScrollPos<0&&(this.maxScrollPos-=this.relativeOffset,this.minScrollPos=-this.relativeOffset),this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,this.hasScroll||(this.maxScrollPos=this.minScrollPos,this.elementSize=this.wrapperSize),this.direction=0},t.prototype.updatePosition=function(t){this.currentPos=t},t.prototype.limitPosition=function(){var t=this.currentPos,e=Math.round(t);return!this.hasScroll||e>this.minScrollPos?t=this.minScrollPos:e<this.maxScrollPos&&(t=this.maxScrollPos),t},t}(),tt=function(){function t(t,e){var m=this;this.hooks=new v(["scroll","scrollEnd","refresh","beforeScrollStart","scrollStart","touchEnd","flick","scrollCancel"]),this.wrapper=t,this.element=t.children[0],this.options=e,this.enabled=!0,this.x=0,this.y=0,this.scrollBehaviorX=new Q(t,this.createBehaviorOpt("scrollX")),this.scrollBehaviorY=new Q(t,this.createBehaviorOpt("scrollY")),this.translater=this.options.useTransform?new G(this.element,{translateZ:this.options.translateZ}):new Z(this.element),this.animater=this.options.useTransition?new J(this.element,this.translater,{probeType:this.options.probeType}):new K(this.element,this.translater,{probeType:this.options.probeType}),this.actionsHandler=new q(t,this.createActionsHandlerOpt());var i=this.resize.bind(this);this.resizeRegister=new j(window,[{name:"orientationchange",handler:i},{name:"resize",handler:i}]),this.transitionEndRegister=new j(this.element,[{name:H.transitionEnd,handler:this.transitionEnd.bind(this)}]),this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(t){m.resetPosition(m.options.bounceTime)||m.hooks.trigger(m.hooks.eventTypes.scrollEnd,t)}),this.animater.hooks.on(this.animater.hooks.eventTypes.move,function(t){m.hooks.trigger(m.hooks.eventTypes.scroll,t)}),this.animater.hooks.on(this.animater.hooks.eventTypes.forceStop,function(t){var e=t.x,i=t.y;m.x=e,m.y=i,m.scrollBehaviorX.updatePosition(e),m.scrollBehaviorY.updatePosition(i)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(){if(!m.enabled)return!0;var t=k();m.moved=!1,m.directionLocked=a.Default,m.startTime=t,m.distX=0,m.distY=0,m.scrollBehaviorX.start(),m.scrollBehaviorY.start(),m.animater.stop(),m.startX=m.x,m.startY=m.y,m.hooks.trigger(m.hooks.eventTypes.beforeScrollStart)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(t){var e=t.deltaX,i=t.deltaY,o=t.e;if(!m.enabled)return!0;m.distX+=e,m.distY+=i;var n=Math.abs(m.distX),s=Math.abs(m.distY),r=k();if(r-m.endTime>m.options.momentumLimitTime&&s<m.options.momentumLimitDistance&&n<m.options.momentumLimitDistance)return!0;m.computeDirectionLock(n,s),m.handleEventPassthrough(o),e=m.ajustDelta(e,i).deltaX,i=m.ajustDelta(e,i).deltaY;var h=m.options.bounce,a=h.left,l=h.right,c=h.top,p=h.bottom,u=m.scrollBehaviorX.move(e,[a,l]),f=m.scrollBehaviorY.move(i,[c,p]);m.moved||(m.moved=!0,m.hooks.trigger(m.hooks.eventTypes.scrollStart)),m.animater.translate(u,f),m.scrollBehaviorX.updatePosition(u),m.scrollBehaviorY.updatePosition(f),m.x=u,m.y=f,r-m.startTime>m.options.momentumLimitTime&&(m.startTime=r,m.startX=m.x,m.startY=m.y,m.options.probeType===d.Throttle&&m.hooks.trigger(m.hooks.eventTypes.scroll,{x:m.x,y:m.y})),m.options.probeType>d.Throttle&&m.hooks.trigger(m.hooks.eventTypes.scroll,{x:m.x,y:m.y})}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(t){if(!m.enabled)return!0;m.hooks.trigger(m.hooks.eventTypes.touchEnd,{x:m.x,y:m.y}),m.animater.pending=!1;var e,i=Math.round(m.x),o=Math.round(m.y),n=R.swiper;if(m.scrollBehaviorX.updateDirection(),m.scrollBehaviorY.updateDirection(),m.checkClick(t))m.hooks.trigger(m.hooks.eventTypes.scrollCancel);else if(!m.resetPosition(m.options.bounceTime,R.bounce)){m.animater.translate(i,o),m.scrollBehaviorX.updatePosition(i),m.scrollBehaviorY.updatePosition(o),m.x=i,m.y=o,m.endTime=k();var s=m.endTime-m.startTime,r=Math.abs(i-m.startX),h=Math.abs(o-m.startY);if(s<m.options.flickLimitTime&&r<m.options.flickLimitDistance&&h<m.options.flickLimitDistance)m.hooks.trigger("flick");else{var a=m.scrollBehaviorX.end({duration:s,bounces:[m.options.bounce.left,m.options.bounce.right],startPos:m.startX}),l=m.scrollBehaviorY.end({duration:s,bounces:[m.options.bounce.top,m.options.bounce.bottom],startPos:m.startY});if(i=P(a.destination)?i:a.destination,o=P(l.destination)?o:l.destination,e=Math.max(a.duration,l.duration),i!==m.x||o!==m.y)return(i>m.scrollBehaviorX.minScrollPos||i<m.scrollBehaviorX.maxScrollPos||o>m.scrollBehaviorY.minScrollPos||o<m.scrollBehaviorY.maxScrollPos)&&(n=R.swipeBounce),void m.scrollTo(i,o,e,n);m.hooks.trigger(m.hooks.eventTypes.scrollEnd,{x:m.x,y:m.y})}}}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(t){m.enabled&&!t._constructed&&(A(t.target,m.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation()))})}return t.prototype.computeDirectionLock=function(t,e){this.directionLocked!==h.Default||this.options.freeScroll||(t>e+this.options.directionLockThreshold?this.directionLocked=a.Horizontal:e>=t+this.options.directionLockThreshold?this.directionLocked=a.Vertical:this.directionLocked=a.None)},t.prototype.handleEventPassthrough=function(t){if(this.directionLocked===a.Horizontal){if(this.options.eventPassthrough===u.Vertical)t.preventDefault();else if(this.options.eventPassthrough===u.Horizontal)return!(this.actionsHandler.initiated=!1)}else if(this.directionLocked===a.Vertical)if(this.options.eventPassthrough===u.Horizontal)t.preventDefault();else if(this.options.eventPassthrough===u.Vertical)return!(this.actionsHandler.initiated=!1)},t.prototype.ajustDelta=function(t,e){return this.directionLocked===a.Horizontal?e=0:this.directionLocked===a.Vertical&&(t=0),{deltaX:t,deltaY:e}},t.prototype.resize=function(){var t=this;this.enabled&&(T&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){t.refresh()},this.options.resizePolling))},t.prototype.transitionEnd=function(t){t.target===this.element&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,R.bounce)||(this.animater.pending=!1,this.options.probeType!==d.Realtime&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,{x:this.x,y:this.y})))},t.prototype.checkClick=function(t){var e,i,o,n=this.animater.forceStopped;return this.animater.forceStopped=!1,!this.moved&&(!n&&(this.options.tap&&(e=t,i=this.options.tap,(o=document.createEvent("Event")).initEvent(i,!0,!0),o.pageX=e.pageX,o.pageY=e.pageY,e.target.dispatchEvent(o)),this.options.click&&!A(t.target,this.options.preventDefaultException)&&function(t,e){var i;void 0===e&&(e="click"),"mouseup"===t.type||"mousecancel"===t.type?i=t:"touchend"!==t.type&&"touchcancel"!==t.type||(i=t.changedTouches[0]);var o,n={};i&&(n.screenX=i.screenX||0,n.screenY=i.screenY||0,n.clientX=i.clientX||0,n.clientY=i.clientY||0);var s=!0,r=!0;if("undefined"!=typeof MouseEvent)try{o=new MouseEvent(e,w({bubbles:s,cancelable:r},n))}catch(t){h()}else h();function h(){(o=document.createEvent("Event")).initEvent(e,s,r),w(o,n)}o.forwardedTouchEvent=!0,o._constructed=!0,t.target.dispatchEvent(o)}(t),!0))},t.prototype.createActionsHandlerOpt=function(){var i=this;return["click","bindToWrapper","disableMouse","preventDefault","stopPropagation","preventDefaultException"].reduce(function(t,e){return t[e]=i.options[e],t},{})},t.prototype.createBehaviorOpt=function(t){var i=this,e=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime"].reduce(function(t,e){return t[e]=i.options[e],t},{});return e.scrollable=this.options[t],e},t.prototype.refresh=function(){this.scrollBehaviorX.refresh({size:"width",position:"left"}),this.scrollBehaviorY.refresh({size:"height",position:"top"}),this.endTime=0,this.wrapperOffset=B(this.wrapper)},t.prototype.scrollBy=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=R.bounce),t+=this.x,e+=this.y,this.scrollTo(t,e,i,o)},t.prototype.scrollTo=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=R.bounce);var n=this.options.useTransition?o.style:o.fn;t===this.x&&e===this.y||(this.animater.scrollTo([this.x,t],[this.y,e],i,n),this.scrollBehaviorX.updatePosition(t),this.scrollBehaviorY.updatePosition(e),this.x=t,this.y=e)},t.prototype.scrollToElement=function(t,e,i,o,n){var s=B(t=t.nodeType?t:this.element.querySelector(t));s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,!0===i&&(i=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===o&&(o=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=o||0,s.left=s.left>this.scrollBehaviorX.minScrollPos?this.scrollBehaviorX.minScrollPos:s.left<this.scrollBehaviorX.maxScrollPos?this.scrollBehaviorX.maxScrollPos:s.left,s.top=s.top>this.scrollBehaviorY.minScrollPos?this.scrollBehaviorY.minScrollPos:s.top<this.scrollBehaviorY.maxScrollPos?this.scrollBehaviorY.maxScrollPos:s.top,this.scrollTo(s.left,s.top,e,n)},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=R.bounce);var i=this.scrollBehaviorX.limitPosition(),o=this.scrollBehaviorY.limitPosition();return(i!==this.x||o!==this.y)&&(this.scrollTo(i,o,t,e),this.scrollBehaviorX.updatePosition(i),this.scrollBehaviorY.updatePosition(o),this.x=i,this.y=o,!0)},t}();return function(n){function t(t,e){var i=n.call(this,["refresh","scrollStart"])||this,o="string"==typeof t?document.querySelector(t):t;return o?o.children[0]?(i.options=(new V).merge(e).process(),i.hooks=new v(["init"]),i.init(o)):s("The wrapper need at least one child element to be scroller."):s("Can not resolve the wrapper DOM."),i}return i(t,n),t.use=function(t){var e=t.name;this._pluginsMap||(this._pluginsMap={}),this._pluginsMap[e]&&s("This plugin has been registered, maybe you need change plugin's name"),this._pluginsMap[e]=t},t.prototype.init=function(t){this.scroller=new tt(t,this.options),this.applyPlugins(),this.options.autoBlur&&this.handleAutoBlur(),this.refresh(),this.options.slide||this.scroller.scrollTo(this.options.startX,this.options.startY),this.enable()},t.prototype.applyPlugins=function(){var t,e=this.options,i=this.constructor._pluginsMap||{};for(var o in i)t=i[o],e[o]&&"function"==typeof t&&new t(this)},t.prototype.handleAutoBlur=function(){this.on(this.eventTypes.scrollStart,function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()})},t.prototype.refresh=function(){this.scroller.refresh(),this.trigger(this.eventTypes.refresh),this.scroller.resetPosition()},t.prototype.enable=function(){this.scroller.enabled=!0},t.prototype.disable=function(){this.scroller.enabled=!1},t.prototype.destroy=function(){},t.version="2.0.0",t}(v)});
